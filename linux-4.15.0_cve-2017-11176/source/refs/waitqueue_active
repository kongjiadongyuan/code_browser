<def f='linux/include/linux/wait.h' l='124' ll='127' type='int waitqueue_active(struct wait_queue_head * wq_head)'/>
<use f='linux/include/linux/wait.h' l='147' u='c' c='wq_has_sleeper'/>
<doc f='linux/include/linux/wait.h' l='94'>/**
 * waitqueue_active -- locklessly test for waiters on the queue
 * @wq_head: the waitqueue to test for waiters
 *
 * returns true if the wait list is not empty
 *
 * NOTE: this function is lockless and requires care, incorrect usage _will_
 * lead to sporadic and non-obvious failure.
 *
 * Use either while holding wait_queue_head::lock or when used for wakeups
 * with an extra smp_mb() like:
 *
 *      CPU0 - waker                    CPU1 - waiter
 *
 *                                      for (;;) {
 *      @cond = true;                     prepare_to_wait(&amp;wq_head, &amp;wait, state);
 *      smp_mb();                         // smp_mb() from set_current_state()
 *      if (waitqueue_active(wq_head))         if (@cond)
 *        wake_up(wq_head);                      break;
 *                                        schedule();
 *                                      }
 *                                      finish_wait(&amp;wq_head, &amp;wait);
 *
 * Because without the explicit smp_mb() it&apos;s possible for the
 * waitqueue_active() load to get hoisted over the @cond store such that we&apos;ll
 * observe an empty wait list while the waiter might not observe @cond.
 *
 * Also note that this &apos;optimization&apos; trades a spin_lock() for an smp_mb(),
 * which (when the lock is uncontended) are of roughly equal cost.
 */</doc>
<use f='linux/block/blk-core.c' l='1157' u='c' c='__freed_request'/>
<use f='linux/drivers/base/power/wakeup.c' l='672' u='c' c='wakeup_source_deactivate'/>
<use f='linux/drivers/gpu/drm/i915/i915_debugfs.c' l='1308' u='c' c='i915_hangcheck_info'/>
<use f='linux/drivers/gpu/drm/i915/i915_debugfs.c' l='1310' u='c' c='i915_hangcheck_info'/>
<use f='linux/drivers/md/md.c' l='9297' u='c' c='md_exit'/>
<use f='linux/drivers/tty/tty_io.c' l='1667' u='c' c='tty_release'/>
<use f='linux/drivers/tty/tty_io.c' l='1671' u='c' c='tty_release'/>
<use f='linux/drivers/tty/tty_io.c' l='1677' u='c' c='tty_release'/>
<use f='linux/drivers/tty/tty_io.c' l='1681' u='c' c='tty_release'/>
<use f='linux/fs/aio.c' l='1190' u='c' c='aio_complete'/>
<use f='linux/fs/eventfd.c' l='62' u='c' c='eventfd_signal'/>
<use f='linux/fs/eventfd.c' l='202' u='c' c='eventfd_ctx_remove_wait_queue'/>
<use f='linux/fs/eventfd.c' l='255' u='c' c='eventfd_ctx_read'/>
<use f='linux/fs/eventfd.c' l='319' u='c' c='eventfd_write'/>
<use f='linux/fs/eventpoll.c' l='736' u='c' c='ep_scan_ready_list'/>
<use f='linux/fs/eventpoll.c' l='738' u='c' c='ep_scan_ready_list'/>
<use f='linux/fs/eventpoll.c' l='811' u='c' c='ep_free'/>
<use f='linux/fs/eventpoll.c' l='1176' u='c' c='ep_poll_callback'/>
<use f='linux/fs/eventpoll.c' l='1195' u='c' c='ep_poll_callback'/>
<use f='linux/fs/eventpoll.c' l='1494' u='c' c='ep_insert'/>
<use f='linux/fs/eventpoll.c' l='1496' u='c' c='ep_insert'/>
<use f='linux/fs/eventpoll.c' l='1602' u='c' c='ep_modify'/>
<use f='linux/fs/eventpoll.c' l='1604' u='c' c='ep_modify'/>
<use f='linux/fs/locks.c' l='342' u='c' c='locks_free_lock'/>
<use f='linux/include/linux/signalfd.h' l='21' u='c' c='signalfd_notify'/>
<use f='linux/fs/signalfd.c' l='44' u='c' c='signalfd_cleanup'/>
<use f='linux/fs/splice.c' l='169' u='c' c='wakeup_pipe_readers'/>
<use f='linux/fs/splice.c' l='458' u='c' c='wakeup_pipe_writers'/>
<use f='linux/kernel/events/uprobes.c' l='1353' u='c' c='xol_free_insn_slot'/>
<use f='linux/kernel/printk/printk.c' l='2710' u='c' c='wake_up_klogd'/>
<use f='linux/kernel/relay.c' l='759' u='c' c='relay_switch_subbuf'/>
<use f='linux/kernel/sched/wait_bit.c' l='123' u='c' c='__wake_up_bit'/>
<use f='linux/kernel/workqueue.c' l='2952' u='c' c='__cancel_work_timer'/>
<use f='linux/lib/sbitmap.c' l='414' u='c' c='sbq_wake_ptr'/>
<use f='linux/lib/sbitmap.c' l='492' u='c' c='sbitmap_queue_wake_all'/>
<use f='linux/lib/sbitmap.c' l='526' u='c' c='sbitmap_queue_show'/>
<use f='linux/mm/backing-dev.c' l='992' u='c' c='clear_wb_congested'/>
<use f='linux/mm/filemap.c' l='1054' u='c' c='wake_up_page_bit'/>
<use f='linux/mm/vmscan.c' l='2938' u='c' c='allow_direct_reclaim'/>
<use f='linux/mm/vmscan.c' l='3242' u='c' c='prepare_kswapd_sleep'/>
<use f='linux/mm/vmscan.c' l='3399' u='c' c='balance_pgdat'/>
<use f='linux/mm/vmscan.c' l='3638' u='c' c='wakeup_kswapd'/>
<use f='linux/net/core/sock.c' l='2785' u='c' c='release_sock'/>
<use f='linux/net/sunrpc/sched.c' l='299' u='c' c='rpc_complete_task'/>
<use f='linux/sound/core/seq/seq_fifo.c' l='81' u='c' c='snd_seq_fifo_delete'/>
<use f='linux/sound/core/seq/seq_fifo.c' l='148' u='c' c='snd_seq_fifo_event_in'/>
<use f='linux/sound/core/seq/seq_memory.c' l='209' u='c' c='snd_seq_cell_free'/>
<use f='linux/sound/core/seq/seq_memory.c' l='444' u='c' c='snd_seq_pool_done'/>
