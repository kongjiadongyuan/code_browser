<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>svc.h source code [linux/include/linux/sunrpc/svc.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="svc_deferred_req,svc_pool,svc_pool_map,svc_pool_stats,svc_procedure,svc_program,svc_rqst,svc_serv,svc_serv_ops,svc_version "/>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux/include/linux/sunrpc/svc.h'; var root_path = '../../../..'; var data_path = '../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>linux</a>/<a href='../..'>include</a>/<a href='..'>linux</a>/<a href='./'>sunrpc</a>/<a href='svc.h.html'>svc.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* SPDX-License-Identifier: GPL-2.0 */</i></td></tr>
<tr><th id="2">2</th><td><i>/*</i></td></tr>
<tr><th id="3">3</th><td><i> * linux/include/linux/sunrpc/svc.h</i></td></tr>
<tr><th id="4">4</th><td><i> *</i></td></tr>
<tr><th id="5">5</th><td><i> * RPC server declarations.</i></td></tr>
<tr><th id="6">6</th><td><i> *</i></td></tr>
<tr><th id="7">7</th><td><i> * Copyright (C) 1995, 1996 Olaf Kirch &lt;okir@monad.swb.de&gt;</i></td></tr>
<tr><th id="8">8</th><td><i> */</i></td></tr>
<tr><th id="9">9</th><td></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#<span data-ppcond="11">ifndef</span> <span class="macro" data-ref="_M/SUNRPC_SVC_H">SUNRPC_SVC_H</span></u></td></tr>
<tr><th id="12">12</th><td><u>#define <dfn class="macro" id="_M/SUNRPC_SVC_H" data-ref="_M/SUNRPC_SVC_H">SUNRPC_SVC_H</dfn></u></td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="../in.h.html">&lt;linux/in.h&gt;</a></u></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="../in6.h.html">&lt;linux/in6.h&gt;</a></u></td></tr>
<tr><th id="16">16</th><td><u>#include <a href="types.h.html">&lt;linux/sunrpc/types.h&gt;</a></u></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="xdr.h.html">&lt;linux/sunrpc/xdr.h&gt;</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="auth.h.html">&lt;linux/sunrpc/auth.h&gt;</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="svcauth.h.html">&lt;linux/sunrpc/svcauth.h&gt;</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../wait.h.html">&lt;linux/wait.h&gt;</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../mm.h.html">&lt;linux/mm.h&gt;</a></u></td></tr>
<tr><th id="22">22</th><td></td></tr>
<tr><th id="23">23</th><td><i>/* statistics for svc_pool structures */</i></td></tr>
<tr><th id="24">24</th><td><b>struct</b> <dfn class="type def" id="svc_pool_stats" title='svc_pool_stats' data-ref="svc_pool_stats" data-ref-filename="svc_pool_stats">svc_pool_stats</dfn> {</td></tr>
<tr><th id="25">25</th><td>	<a class="typedef" href="../../asm-generic/atomic-long.h.html#atomic_long_t" title='atomic_long_t' data-type='atomic64_t' data-ref="atomic_long_t" data-ref-filename="atomic_long_t">atomic_long_t</a>	<dfn class="decl field" id="svc_pool_stats::packets" title='svc_pool_stats::packets' data-ref="svc_pool_stats::packets" data-ref-filename="svc_pool_stats..packets">packets</dfn>;</td></tr>
<tr><th id="26">26</th><td>	<em>unsigned</em> <em>long</em>	<dfn class="decl field" id="svc_pool_stats::sockets_queued" title='svc_pool_stats::sockets_queued' data-ref="svc_pool_stats::sockets_queued" data-ref-filename="svc_pool_stats..sockets_queued">sockets_queued</dfn>;</td></tr>
<tr><th id="27">27</th><td>	<a class="typedef" href="../../asm-generic/atomic-long.h.html#atomic_long_t" title='atomic_long_t' data-type='atomic64_t' data-ref="atomic_long_t" data-ref-filename="atomic_long_t">atomic_long_t</a>	<dfn class="decl field" id="svc_pool_stats::threads_woken" title='svc_pool_stats::threads_woken' data-ref="svc_pool_stats::threads_woken" data-ref-filename="svc_pool_stats..threads_woken">threads_woken</dfn>;</td></tr>
<tr><th id="28">28</th><td>	<a class="typedef" href="../../asm-generic/atomic-long.h.html#atomic_long_t" title='atomic_long_t' data-type='atomic64_t' data-ref="atomic_long_t" data-ref-filename="atomic_long_t">atomic_long_t</a>	<dfn class="decl field" id="svc_pool_stats::threads_timedout" title='svc_pool_stats::threads_timedout' data-ref="svc_pool_stats::threads_timedout" data-ref-filename="svc_pool_stats..threads_timedout">threads_timedout</dfn>;</td></tr>
<tr><th id="29">29</th><td>};</td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><i>/*</i></td></tr>
<tr><th id="32">32</th><td><i> *</i></td></tr>
<tr><th id="33">33</th><td><i> * RPC service thread pool.</i></td></tr>
<tr><th id="34">34</th><td><i> *</i></td></tr>
<tr><th id="35">35</th><td><i> * Pool of threads and temporary sockets.  Generally there is only</i></td></tr>
<tr><th id="36">36</th><td><i> * a single one of these per RPC service, but on NUMA machines those</i></td></tr>
<tr><th id="37">37</th><td><i> * services that can benefit from it (i.e. nfs but not lockd) will</i></td></tr>
<tr><th id="38">38</th><td><i> * have one pool per NUMA node.  This optimisation reduces cross-</i></td></tr>
<tr><th id="39">39</th><td><i> * node traffic on multi-node NUMA NFS servers.</i></td></tr>
<tr><th id="40">40</th><td><i> */</i></td></tr>
<tr><th id="41">41</th><td><b>struct</b> <dfn class="type def" id="svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</dfn> {</td></tr>
<tr><th id="42">42</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_pool::sp_id" title='svc_pool::sp_id' data-ref="svc_pool::sp_id" data-ref-filename="svc_pool..sp_id">sp_id</dfn>;	    	<i>/* pool id; also node id on NUMA */</i></td></tr>
<tr><th id="43">43</th><td>	<a class="typedef" href="../spinlock_types.h.html#spinlock_t" title='spinlock_t' data-type='struct spinlock' data-ref="spinlock_t" data-ref-filename="spinlock_t">spinlock_t</a>		<dfn class="decl field" id="svc_pool::sp_lock" title='svc_pool::sp_lock' data-ref="svc_pool::sp_lock" data-ref-filename="svc_pool..sp_lock">sp_lock</dfn>;	<i>/* protects all fields */</i></td></tr>
<tr><th id="44">44</th><td>	<b>struct</b> <a class="type" href="../types.h.html#list_head" title='list_head' data-ref="list_head" data-ref-filename="list_head">list_head</a>	<dfn class="decl field" id="svc_pool::sp_sockets" title='svc_pool::sp_sockets' data-ref="svc_pool::sp_sockets" data-ref-filename="svc_pool..sp_sockets">sp_sockets</dfn>;	<i>/* pending sockets */</i></td></tr>
<tr><th id="45">45</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_pool::sp_nrthreads" title='svc_pool::sp_nrthreads' data-ref="svc_pool::sp_nrthreads" data-ref-filename="svc_pool..sp_nrthreads">sp_nrthreads</dfn>;	<i>/* # of threads in pool */</i></td></tr>
<tr><th id="46">46</th><td>	<b>struct</b> <a class="type" href="../types.h.html#list_head" title='list_head' data-ref="list_head" data-ref-filename="list_head">list_head</a>	<dfn class="decl field" id="svc_pool::sp_all_threads" title='svc_pool::sp_all_threads' data-ref="svc_pool::sp_all_threads" data-ref-filename="svc_pool..sp_all_threads">sp_all_threads</dfn>;	<i>/* all server threads */</i></td></tr>
<tr><th id="47">47</th><td>	<b>struct</b> <a class="type" href="#svc_pool_stats" title='svc_pool_stats' data-ref="svc_pool_stats" data-ref-filename="svc_pool_stats">svc_pool_stats</a>	<dfn class="decl field" id="svc_pool::sp_stats" title='svc_pool::sp_stats' data-ref="svc_pool::sp_stats" data-ref-filename="svc_pool..sp_stats">sp_stats</dfn>;	<i>/* statistics on pool operation */</i></td></tr>
<tr><th id="48">48</th><td><u>#define	<dfn class="macro" id="_M/SP_TASK_PENDING" data-ref="_M/SP_TASK_PENDING">SP_TASK_PENDING</dfn>		(0)		/* still work to do even if no</u></td></tr>
<tr><th id="49">49</th><td><u>						 * xprt is queued. */</u></td></tr>
<tr><th id="50">50</th><td><u>#define <dfn class="macro" id="_M/SP_CONGESTED" data-ref="_M/SP_CONGESTED">SP_CONGESTED</dfn>		(1)</u></td></tr>
<tr><th id="51">51</th><td>	<em>unsigned</em> <em>long</em>		<dfn class="decl field" id="svc_pool::sp_flags" title='svc_pool::sp_flags' data-ref="svc_pool::sp_flags" data-ref-filename="svc_pool..sp_flags">sp_flags</dfn>;</td></tr>
<tr><th id="52">52</th><td>} <a class="macro" href="../cache.h.html#40" title="__attribute__((__aligned__((1 &lt;&lt; (6)))))" data-ref="_M/____cacheline_aligned_in_smp">____cacheline_aligned_in_smp</a>;</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a>;</td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><b>struct</b> <dfn class="type def" id="svc_serv_ops" title='svc_serv_ops' data-ref="svc_serv_ops" data-ref-filename="svc_serv_ops">svc_serv_ops</dfn> {</td></tr>
<tr><th id="57">57</th><td>	<i>/* Callback to use when last thread exits. */</i></td></tr>
<tr><th id="58">58</th><td>	<em>void</em>		(*<dfn class="decl field" id="svc_serv_ops::svo_shutdown" title='svc_serv_ops::svo_shutdown' data-ref="svc_serv_ops::svo_shutdown" data-ref-filename="svc_serv_ops..svo_shutdown">svo_shutdown</dfn>)(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *);</td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td>	<i>/* function for service threads to run */</i></td></tr>
<tr><th id="61">61</th><td>	<em>int</em>		(*<dfn class="decl field" id="svc_serv_ops::svo_function" title='svc_serv_ops::svo_function' data-ref="svc_serv_ops::svo_function" data-ref-filename="svc_serv_ops..svo_function">svo_function</dfn>)(<em>void</em> *);</td></tr>
<tr><th id="62">62</th><td></td></tr>
<tr><th id="63">63</th><td>	<i>/* queue up a transport for servicing */</i></td></tr>
<tr><th id="64">64</th><td>	<em>void</em>		(*<dfn class="decl field" id="svc_serv_ops::svo_enqueue_xprt" title='svc_serv_ops::svo_enqueue_xprt' data-ref="svc_serv_ops::svo_enqueue_xprt" data-ref-filename="svc_serv_ops..svo_enqueue_xprt">svo_enqueue_xprt</dfn>)(<b>struct</b> <a class="type" href="xprt.h.html#svc_xprt" title='svc_xprt' data-ref="svc_xprt" data-ref-filename="svc_xprt">svc_xprt</a> *);</td></tr>
<tr><th id="65">65</th><td></td></tr>
<tr><th id="66">66</th><td>	<i>/* set up thread (or whatever) execution context */</i></td></tr>
<tr><th id="67">67</th><td>	<em>int</em>		(*<dfn class="decl field" id="svc_serv_ops::svo_setup" title='svc_serv_ops::svo_setup' data-ref="svc_serv_ops::svo_setup" data-ref-filename="svc_serv_ops..svo_setup">svo_setup</dfn>)(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *, <em>int</em>);</td></tr>
<tr><th id="68">68</th><td></td></tr>
<tr><th id="69">69</th><td>	<i>/* optional module to count when adding threads (pooled svcs only) */</i></td></tr>
<tr><th id="70">70</th><td>	<b>struct</b> <a class="type" href="../module.h.html#module" title='module' data-ref="module" data-ref-filename="module">module</a>	*<dfn class="decl field" id="svc_serv_ops::svo_module" title='svc_serv_ops::svo_module' data-ref="svc_serv_ops::svo_module" data-ref-filename="svc_serv_ops..svo_module">svo_module</dfn>;</td></tr>
<tr><th id="71">71</th><td>};</td></tr>
<tr><th id="72">72</th><td></td></tr>
<tr><th id="73">73</th><td><i>/*</i></td></tr>
<tr><th id="74">74</th><td><i> * RPC service.</i></td></tr>
<tr><th id="75">75</th><td><i> *</i></td></tr>
<tr><th id="76">76</th><td><i> * An RPC service is a ``daemon,'' possibly multithreaded, which</i></td></tr>
<tr><th id="77">77</th><td><i> * receives and processes incoming RPC messages.</i></td></tr>
<tr><th id="78">78</th><td><i> * It has one or more transport sockets associated with it, and maintains</i></td></tr>
<tr><th id="79">79</th><td><i> * a list of idle threads waiting for input.</i></td></tr>
<tr><th id="80">80</th><td><i> *</i></td></tr>
<tr><th id="81">81</th><td><i> * We currently do not support more than one RPC program per daemon.</i></td></tr>
<tr><th id="82">82</th><td><i> */</i></td></tr>
<tr><th id="83">83</th><td><b>struct</b> <dfn class="type def" id="svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</dfn> {</td></tr>
<tr><th id="84">84</th><td>	<b>struct</b> <a class="type" href="#svc_program" title='svc_program' data-ref="svc_program" data-ref-filename="svc_program">svc_program</a> *	<dfn class="decl field" id="svc_serv::sv_program" title='svc_serv::sv_program' data-ref="svc_serv::sv_program" data-ref-filename="svc_serv..sv_program">sv_program</dfn>;	<i>/* RPC program */</i></td></tr>
<tr><th id="85">85</th><td>	<b>struct</b> <a class="type" href="stats.h.html#svc_stat" title='svc_stat' data-ref="svc_stat" data-ref-filename="svc_stat">svc_stat</a> *	<dfn class="decl field" id="svc_serv::sv_stats" title='svc_serv::sv_stats' data-ref="svc_serv::sv_stats" data-ref-filename="svc_serv..sv_stats">sv_stats</dfn>;	<i>/* RPC statistics */</i></td></tr>
<tr><th id="86">86</th><td>	<a class="typedef" href="../spinlock_types.h.html#spinlock_t" title='spinlock_t' data-type='struct spinlock' data-ref="spinlock_t" data-ref-filename="spinlock_t">spinlock_t</a>		<dfn class="decl field" id="svc_serv::sv_lock" title='svc_serv::sv_lock' data-ref="svc_serv::sv_lock" data-ref-filename="svc_serv..sv_lock">sv_lock</dfn>;</td></tr>
<tr><th id="87">87</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_nrthreads" title='svc_serv::sv_nrthreads' data-ref="svc_serv::sv_nrthreads" data-ref-filename="svc_serv..sv_nrthreads">sv_nrthreads</dfn>;	<i>/* # of server threads */</i></td></tr>
<tr><th id="88">88</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_maxconn" title='svc_serv::sv_maxconn' data-ref="svc_serv::sv_maxconn" data-ref-filename="svc_serv..sv_maxconn">sv_maxconn</dfn>;	<i>/* max connections allowed or</i></td></tr>
<tr><th id="89">89</th><td><i>						 * '0' causing max to be based</i></td></tr>
<tr><th id="90">90</th><td><i>						 * on number of threads. */</i></td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_max_payload" title='svc_serv::sv_max_payload' data-ref="svc_serv::sv_max_payload" data-ref-filename="svc_serv..sv_max_payload">sv_max_payload</dfn>;	<i>/* datagram payload size */</i></td></tr>
<tr><th id="93">93</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_max_mesg" title='svc_serv::sv_max_mesg' data-ref="svc_serv::sv_max_mesg" data-ref-filename="svc_serv..sv_max_mesg">sv_max_mesg</dfn>;	<i>/* max_payload + 1 page for overheads */</i></td></tr>
<tr><th id="94">94</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_xdrsize" title='svc_serv::sv_xdrsize' data-ref="svc_serv::sv_xdrsize" data-ref-filename="svc_serv..sv_xdrsize">sv_xdrsize</dfn>;	<i>/* XDR buffer size */</i></td></tr>
<tr><th id="95">95</th><td>	<b>struct</b> <a class="type" href="../types.h.html#list_head" title='list_head' data-ref="list_head" data-ref-filename="list_head">list_head</a>	<dfn class="decl field" id="svc_serv::sv_permsocks" title='svc_serv::sv_permsocks' data-ref="svc_serv::sv_permsocks" data-ref-filename="svc_serv..sv_permsocks">sv_permsocks</dfn>;	<i>/* all permanent sockets */</i></td></tr>
<tr><th id="96">96</th><td>	<b>struct</b> <a class="type" href="../types.h.html#list_head" title='list_head' data-ref="list_head" data-ref-filename="list_head">list_head</a>	<dfn class="decl field" id="svc_serv::sv_tempsocks" title='svc_serv::sv_tempsocks' data-ref="svc_serv::sv_tempsocks" data-ref-filename="svc_serv..sv_tempsocks">sv_tempsocks</dfn>;	<i>/* all temporary sockets */</i></td></tr>
<tr><th id="97">97</th><td>	<em>int</em>			<dfn class="decl field" id="svc_serv::sv_tmpcnt" title='svc_serv::sv_tmpcnt' data-ref="svc_serv::sv_tmpcnt" data-ref-filename="svc_serv..sv_tmpcnt">sv_tmpcnt</dfn>;	<i>/* count of temporary sockets */</i></td></tr>
<tr><th id="98">98</th><td>	<b>struct</b> <a class="type" href="../timer.h.html#timer_list" title='timer_list' data-ref="timer_list" data-ref-filename="timer_list">timer_list</a>	<dfn class="decl field" id="svc_serv::sv_temptimer" title='svc_serv::sv_temptimer' data-ref="svc_serv::sv_temptimer" data-ref-filename="svc_serv..sv_temptimer">sv_temptimer</dfn>;	<i>/* timer for aging temporary sockets */</i></td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>	<em>char</em> *			<dfn class="decl field" id="svc_serv::sv_name" title='svc_serv::sv_name' data-ref="svc_serv::sv_name" data-ref-filename="svc_serv..sv_name">sv_name</dfn>;	<i>/* service name */</i></td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_serv::sv_nrpools" title='svc_serv::sv_nrpools' data-ref="svc_serv::sv_nrpools" data-ref-filename="svc_serv..sv_nrpools">sv_nrpools</dfn>;	<i>/* number of thread pools */</i></td></tr>
<tr><th id="103">103</th><td>	<b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *	<dfn class="decl field" id="svc_serv::sv_pools" title='svc_serv::sv_pools' data-ref="svc_serv::sv_pools" data-ref-filename="svc_serv..sv_pools">sv_pools</dfn>;	<i>/* array of thread pools */</i></td></tr>
<tr><th id="104">104</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#svc_serv_ops" title='svc_serv_ops' data-ref="svc_serv_ops" data-ref-filename="svc_serv_ops">svc_serv_ops</a> *<dfn class="decl field" id="svc_serv::sv_ops" title='svc_serv::sv_ops' data-ref="svc_serv::sv_ops" data-ref-filename="svc_serv..sv_ops">sv_ops</dfn>;	<i>/* server operations */</i></td></tr>
<tr><th id="105">105</th><td><u>#<span data-ppcond="105">if</span> defined(<span class="macro" data-ref="_M/CONFIG_SUNRPC_BACKCHANNEL">CONFIG_SUNRPC_BACKCHANNEL</span>)</u></td></tr>
<tr><th id="106">106</th><td>	<b>struct</b> list_head	sv_cb_list;	<i>/* queue for callback requests</i></td></tr>
<tr><th id="107">107</th><td><i>						 * that arrive over the same</i></td></tr>
<tr><th id="108">108</th><td><i>						 * connection */</i></td></tr>
<tr><th id="109">109</th><td>	spinlock_t		sv_cb_lock;	<i>/* protects the svc_cb_list */</i></td></tr>
<tr><th id="110">110</th><td>	wait_queue_head_t	sv_cb_waitq;	<i>/* sleep here if there are no</i></td></tr>
<tr><th id="111">111</th><td><i>						 * entries in the svc_cb_list */</i></td></tr>
<tr><th id="112">112</th><td>	<b>struct</b> svc_xprt		*sv_bc_xprt;	<i>/* callback on fore channel */</i></td></tr>
<tr><th id="113">113</th><td><u>#<span data-ppcond="105">endif</span> /* CONFIG_SUNRPC_BACKCHANNEL */</u></td></tr>
<tr><th id="114">114</th><td>};</td></tr>
<tr><th id="115">115</th><td></td></tr>
<tr><th id="116">116</th><td><i>/*</i></td></tr>
<tr><th id="117">117</th><td><i> * We use sv_nrthreads as a reference count.  svc_destroy() drops</i></td></tr>
<tr><th id="118">118</th><td><i> * this refcount, so we need to bump it up around operations that</i></td></tr>
<tr><th id="119">119</th><td><i> * change the number of threads.  Horrible, but there it is.</i></td></tr>
<tr><th id="120">120</th><td><i> * Should be called with the "service mutex" held.</i></td></tr>
<tr><th id="121">121</th><td><i> */</i></td></tr>
<tr><th id="122">122</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_get" title='svc_get' data-ref="svc_get" data-ref-filename="svc_get">svc_get</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col2 decl" id="542serv" title='serv' data-type='struct svc_serv *' data-ref="542serv" data-ref-filename="542serv">serv</dfn>)</td></tr>
<tr><th id="123">123</th><td>{</td></tr>
<tr><th id="124">124</th><td>	<a class="local col2 ref" href="#542serv" title='serv' data-ref="542serv" data-ref-filename="542serv">serv</a>-&gt;<a class="ref field" href="#svc_serv::sv_nrthreads" title='svc_serv::sv_nrthreads' data-ref="svc_serv::sv_nrthreads" data-ref-filename="svc_serv..sv_nrthreads">sv_nrthreads</a>++;</td></tr>
<tr><th id="125">125</th><td>}</td></tr>
<tr><th id="126">126</th><td></td></tr>
<tr><th id="127">127</th><td><i>/*</i></td></tr>
<tr><th id="128">128</th><td><i> * Maximum payload size supported by a kernel RPC server.</i></td></tr>
<tr><th id="129">129</th><td><i> * This is use to determine the max number of pages nfsd is</i></td></tr>
<tr><th id="130">130</th><td><i> * willing to return in a single READ operation.</i></td></tr>
<tr><th id="131">131</th><td><i> *</i></td></tr>
<tr><th id="132">132</th><td><i> * These happen to all be powers of 2, which is not strictly</i></td></tr>
<tr><th id="133">133</th><td><i> * necessary but helps enforce the real limitation, which is</i></td></tr>
<tr><th id="134">134</th><td><i> * that they should be multiples of PAGE_SIZE.</i></td></tr>
<tr><th id="135">135</th><td><i> *</i></td></tr>
<tr><th id="136">136</th><td><i> * For UDP transports, a block plus NFS,RPC, and UDP headers</i></td></tr>
<tr><th id="137">137</th><td><i> * has to fit into the IP datagram limit of 64K.  The largest</i></td></tr>
<tr><th id="138">138</th><td><i> * feasible number for all known page sizes is probably 48K,</i></td></tr>
<tr><th id="139">139</th><td><i> * but we choose 32K here.  This is the same as the historical</i></td></tr>
<tr><th id="140">140</th><td><i> * Linux limit; someone who cares more about NFS/UDP performance</i></td></tr>
<tr><th id="141">141</th><td><i> * can test a larger number.</i></td></tr>
<tr><th id="142">142</th><td><i> *</i></td></tr>
<tr><th id="143">143</th><td><i> * For TCP transports we have more freedom.  A size of 1MB is</i></td></tr>
<tr><th id="144">144</th><td><i> * chosen to match the client limit.  Other OSes are known to</i></td></tr>
<tr><th id="145">145</th><td><i> * have larger limits, but those numbers are probably beyond</i></td></tr>
<tr><th id="146">146</th><td><i> * the point of diminishing returns.</i></td></tr>
<tr><th id="147">147</th><td><i> */</i></td></tr>
<tr><th id="148">148</th><td><u>#define <dfn class="macro" id="_M/RPCSVC_MAXPAYLOAD" data-ref="_M/RPCSVC_MAXPAYLOAD">RPCSVC_MAXPAYLOAD</dfn>	(1*1024*1024u)</u></td></tr>
<tr><th id="149">149</th><td><u>#define <dfn class="macro" id="_M/RPCSVC_MAXPAYLOAD_TCP" data-ref="_M/RPCSVC_MAXPAYLOAD_TCP">RPCSVC_MAXPAYLOAD_TCP</dfn>	RPCSVC_MAXPAYLOAD</u></td></tr>
<tr><th id="150">150</th><td><u>#define <dfn class="macro" id="_M/RPCSVC_MAXPAYLOAD_UDP" data-ref="_M/RPCSVC_MAXPAYLOAD_UDP">RPCSVC_MAXPAYLOAD_UDP</dfn>	(32*1024u)</u></td></tr>
<tr><th id="151">151</th><td></td></tr>
<tr><th id="152">152</th><td><b>extern</b> <a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a> <dfn class="decl fn" id="svc_max_payload" title='svc_max_payload' data-ref="svc_max_payload" data-ref-filename="svc_max_payload">svc_max_payload</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col3 decl" id="543rqstp" title='rqstp' data-type='const struct svc_rqst *' data-ref="543rqstp" data-ref-filename="543rqstp">rqstp</dfn>);</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td><i>/*</i></td></tr>
<tr><th id="155">155</th><td><i> * RPC Requsts and replies are stored in one or more pages.</i></td></tr>
<tr><th id="156">156</th><td><i> * We maintain an array of pages for each server thread.</i></td></tr>
<tr><th id="157">157</th><td><i> * Requests are copied into these pages as they arrive.  Remaining</i></td></tr>
<tr><th id="158">158</th><td><i> * pages are available to write the reply into.</i></td></tr>
<tr><th id="159">159</th><td><i> *</i></td></tr>
<tr><th id="160">160</th><td><i> * Pages are sent using -&gt;sendpage so each server thread needs to</i></td></tr>
<tr><th id="161">161</th><td><i> * allocate more to replace those used in sending.  To help keep track</i></td></tr>
<tr><th id="162">162</th><td><i> * of these pages we have a receive list where all pages initialy live,</i></td></tr>
<tr><th id="163">163</th><td><i> * and a send list where pages are moved to when there are to be part</i></td></tr>
<tr><th id="164">164</th><td><i> * of a reply.</i></td></tr>
<tr><th id="165">165</th><td><i> *</i></td></tr>
<tr><th id="166">166</th><td><i> * We use xdr_buf for holding responses as it fits well with NFS</i></td></tr>
<tr><th id="167">167</th><td><i> * read responses (that have a header, and some data pages, and possibly</i></td></tr>
<tr><th id="168">168</th><td><i> * a tail) and means we can share some client side routines.</i></td></tr>
<tr><th id="169">169</th><td><i> *</i></td></tr>
<tr><th id="170">170</th><td><i> * The xdr_buf.head kvec always points to the first page in the rq_*pages</i></td></tr>
<tr><th id="171">171</th><td><i> * list.  The xdr_buf.pages pointer points to the second page on that</i></td></tr>
<tr><th id="172">172</th><td><i> * list.  xdr_buf.tail points to the end of the first page.</i></td></tr>
<tr><th id="173">173</th><td><i> * This assumes that the non-page part of an rpc reply will fit</i></td></tr>
<tr><th id="174">174</th><td><i> * in a page - NFSd ensures this.  lockd also has no trouble.</i></td></tr>
<tr><th id="175">175</th><td><i> *</i></td></tr>
<tr><th id="176">176</th><td><i> * Each request/reply pair can have at most one "payload", plus two pages,</i></td></tr>
<tr><th id="177">177</th><td><i> * one for the request, and one for the reply.</i></td></tr>
<tr><th id="178">178</th><td><i> * We using -&gt;sendfile to return read data, we might need one extra page</i></td></tr>
<tr><th id="179">179</th><td><i> * if the request is not page-aligned.  So add another '1'.</i></td></tr>
<tr><th id="180">180</th><td><i> */</i></td></tr>
<tr><th id="181">181</th><td><u>#define <dfn class="macro" id="_M/RPCSVC_MAXPAGES" data-ref="_M/RPCSVC_MAXPAGES">RPCSVC_MAXPAGES</dfn>		((RPCSVC_MAXPAYLOAD+PAGE_SIZE-1)/PAGE_SIZE \</u></td></tr>
<tr><th id="182">182</th><td><u>				+ 2 + 1)</u></td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a> <dfn class="decl def fn" id="svc_getnl" title='svc_getnl' data-ref="svc_getnl" data-ref-filename="svc_getnl">svc_getnl</dfn>(<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col4 decl" id="544iov" title='iov' data-type='struct kvec *' data-ref="544iov" data-ref-filename="544iov">iov</dfn>)</td></tr>
<tr><th id="185">185</th><td>{</td></tr>
<tr><th id="186">186</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> <dfn class="local col5 decl" id="545val" title='val' data-type='__be32' data-ref="545val" data-ref-filename="545val">val</dfn>, *<dfn class="local col6 decl" id="546vp" title='vp' data-type='__be32 *' data-ref="546vp" data-ref-filename="546vp">vp</dfn>;</td></tr>
<tr><th id="187">187</th><td>	<a class="local col6 ref" href="#546vp" title='vp' data-ref="546vp" data-ref-filename="546vp">vp</a> = <a class="local col4 ref" href="#544iov" title='iov' data-ref="544iov" data-ref-filename="544iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a>;</td></tr>
<tr><th id="188">188</th><td>	<a class="local col5 ref" href="#545val" title='val' data-ref="545val" data-ref-filename="545val">val</a> = *<a class="local col6 ref" href="#546vp" title='vp' data-ref="546vp" data-ref-filename="546vp">vp</a>++;</td></tr>
<tr><th id="189">189</th><td>	<a class="local col4 ref" href="#544iov" title='iov' data-ref="544iov" data-ref-filename="544iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> = (<em>void</em>*)<a class="local col6 ref" href="#546vp" title='vp' data-ref="546vp" data-ref-filename="546vp">vp</a>;</td></tr>
<tr><th id="190">190</th><td>	<a class="local col4 ref" href="#544iov" title='iov' data-ref="544iov" data-ref-filename="544iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> -= <b>sizeof</b>(<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>);</td></tr>
<tr><th id="191">191</th><td>	<b>return</b> <a class="macro" href="../byteorder/generic.h.html#140" title="(__builtin_constant_p((__u32)(( __u32)(__be32)(val))) ? ((__u32)( (((__u32)(( __u32)(__be32)(val)) &amp; (__u32)0x000000ffUL) &lt;&lt; 24) | (((__u32)(( __u32)(__be32)(val)) &amp; (__u32)0x0000ff00UL) &lt;&lt; 8) | (((__u32)(( __u32)(__be32)(val)) &amp; (__u32)0x00ff0000UL) &gt;&gt; 8) | (((__u32)(( __u32)(__be32)(val)) &amp; (__u32)0xff000000UL) &gt;&gt; 24))) : __fswab32(( __u32)(__be32)(val)))" data-ref="_M/ntohl">ntohl</a>(<a class="local col5 ref" href="#545val" title='val' data-ref="545val" data-ref-filename="545val">val</a>);</td></tr>
<tr><th id="192">192</th><td>}</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_putnl" title='svc_putnl' data-ref="svc_putnl" data-ref-filename="svc_putnl">svc_putnl</dfn>(<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col7 decl" id="547iov" title='iov' data-type='struct kvec *' data-ref="547iov" data-ref-filename="547iov">iov</dfn>, <a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a> <dfn class="local col8 decl" id="548val" title='val' data-type='u32' data-ref="548val" data-ref-filename="548val">val</dfn>)</td></tr>
<tr><th id="195">195</th><td>{</td></tr>
<tr><th id="196">196</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col9 decl" id="549vp" title='vp' data-type='__be32 *' data-ref="549vp" data-ref-filename="549vp">vp</dfn> = <a class="local col7 ref" href="#547iov" title='iov' data-ref="547iov" data-ref-filename="547iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> + <a class="local col7 ref" href="#547iov" title='iov' data-ref="547iov" data-ref-filename="547iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a>;</td></tr>
<tr><th id="197">197</th><td>	*<a class="local col9 ref" href="#549vp" title='vp' data-ref="549vp" data-ref-filename="549vp">vp</a> = <a class="macro" href="../byteorder/generic.h.html#139" title="(( __be32)(__builtin_constant_p((__u32)((val))) ? ((__u32)( (((__u32)((val)) &amp; (__u32)0x000000ffUL) &lt;&lt; 24) | (((__u32)((val)) &amp; (__u32)0x0000ff00UL) &lt;&lt; 8) | (((__u32)((val)) &amp; (__u32)0x00ff0000UL) &gt;&gt; 8) | (((__u32)((val)) &amp; (__u32)0xff000000UL) &gt;&gt; 24))) : __fswab32((val))))" data-ref="_M/htonl">htonl</a>(<a class="local col8 ref" href="#548val" title='val' data-ref="548val" data-ref-filename="548val">val</a>);</td></tr>
<tr><th id="198">198</th><td>	<a class="local col7 ref" href="#547iov" title='iov' data-ref="547iov" data-ref-filename="547iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> += <b>sizeof</b>(<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>);</td></tr>
<tr><th id="199">199</th><td>}</td></tr>
<tr><th id="200">200</th><td></td></tr>
<tr><th id="201">201</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> <dfn class="decl def fn" id="svc_getu32" title='svc_getu32' data-ref="svc_getu32" data-ref-filename="svc_getu32">svc_getu32</dfn>(<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col0 decl" id="550iov" title='iov' data-type='struct kvec *' data-ref="550iov" data-ref-filename="550iov">iov</dfn>)</td></tr>
<tr><th id="202">202</th><td>{</td></tr>
<tr><th id="203">203</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> <dfn class="local col1 decl" id="551val" title='val' data-type='__be32' data-ref="551val" data-ref-filename="551val">val</dfn>, *<dfn class="local col2 decl" id="552vp" title='vp' data-type='__be32 *' data-ref="552vp" data-ref-filename="552vp">vp</dfn>;</td></tr>
<tr><th id="204">204</th><td>	<a class="local col2 ref" href="#552vp" title='vp' data-ref="552vp" data-ref-filename="552vp">vp</a> = <a class="local col0 ref" href="#550iov" title='iov' data-ref="550iov" data-ref-filename="550iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a>;</td></tr>
<tr><th id="205">205</th><td>	<a class="local col1 ref" href="#551val" title='val' data-ref="551val" data-ref-filename="551val">val</a> = *<a class="local col2 ref" href="#552vp" title='vp' data-ref="552vp" data-ref-filename="552vp">vp</a>++;</td></tr>
<tr><th id="206">206</th><td>	<a class="local col0 ref" href="#550iov" title='iov' data-ref="550iov" data-ref-filename="550iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> = (<em>void</em>*)<a class="local col2 ref" href="#552vp" title='vp' data-ref="552vp" data-ref-filename="552vp">vp</a>;</td></tr>
<tr><th id="207">207</th><td>	<a class="local col0 ref" href="#550iov" title='iov' data-ref="550iov" data-ref-filename="550iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> -= <b>sizeof</b>(<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>);</td></tr>
<tr><th id="208">208</th><td>	<b>return</b> <a class="local col1 ref" href="#551val" title='val' data-ref="551val" data-ref-filename="551val">val</a>;</td></tr>
<tr><th id="209">209</th><td>}</td></tr>
<tr><th id="210">210</th><td></td></tr>
<tr><th id="211">211</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_ungetu32" title='svc_ungetu32' data-ref="svc_ungetu32" data-ref-filename="svc_ungetu32">svc_ungetu32</dfn>(<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col3 decl" id="553iov" title='iov' data-type='struct kvec *' data-ref="553iov" data-ref-filename="553iov">iov</dfn>)</td></tr>
<tr><th id="212">212</th><td>{</td></tr>
<tr><th id="213">213</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col4 decl" id="554vp" title='vp' data-type='__be32 *' data-ref="554vp" data-ref-filename="554vp">vp</dfn> = (<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *)<a class="local col3 ref" href="#553iov" title='iov' data-ref="553iov" data-ref-filename="553iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a>;</td></tr>
<tr><th id="214">214</th><td>	<a class="local col3 ref" href="#553iov" title='iov' data-ref="553iov" data-ref-filename="553iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> = (<em>void</em> *)(<a class="local col4 ref" href="#554vp" title='vp' data-ref="554vp" data-ref-filename="554vp">vp</a> - <var>1</var>);</td></tr>
<tr><th id="215">215</th><td>	<a class="local col3 ref" href="#553iov" title='iov' data-ref="553iov" data-ref-filename="553iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> += <b>sizeof</b>(*<a class="local col4 ref" href="#554vp" title='vp' data-ref="554vp" data-ref-filename="554vp">vp</a>);</td></tr>
<tr><th id="216">216</th><td>}</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_putu32" title='svc_putu32' data-ref="svc_putu32" data-ref-filename="svc_putu32">svc_putu32</dfn>(<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col5 decl" id="555iov" title='iov' data-type='struct kvec *' data-ref="555iov" data-ref-filename="555iov">iov</dfn>, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> <dfn class="local col6 decl" id="556val" title='val' data-type='__be32' data-ref="556val" data-ref-filename="556val">val</dfn>)</td></tr>
<tr><th id="219">219</th><td>{</td></tr>
<tr><th id="220">220</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col7 decl" id="557vp" title='vp' data-type='__be32 *' data-ref="557vp" data-ref-filename="557vp">vp</dfn> = <a class="local col5 ref" href="#555iov" title='iov' data-ref="555iov" data-ref-filename="555iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> + <a class="local col5 ref" href="#555iov" title='iov' data-ref="555iov" data-ref-filename="555iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a>;</td></tr>
<tr><th id="221">221</th><td>	*<a class="local col7 ref" href="#557vp" title='vp' data-ref="557vp" data-ref-filename="557vp">vp</a> = <a class="local col6 ref" href="#556val" title='val' data-ref="556val" data-ref-filename="556val">val</a>;</td></tr>
<tr><th id="222">222</th><td>	<a class="local col5 ref" href="#555iov" title='iov' data-ref="555iov" data-ref-filename="555iov">iov</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> += <b>sizeof</b>(<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>);</td></tr>
<tr><th id="223">223</th><td>}</td></tr>
<tr><th id="224">224</th><td></td></tr>
<tr><th id="225">225</th><td><i>/*</i></td></tr>
<tr><th id="226">226</th><td><i> * The context of a single thread, including the request currently being</i></td></tr>
<tr><th id="227">227</th><td><i> * processed.</i></td></tr>
<tr><th id="228">228</th><td><i> */</i></td></tr>
<tr><th id="229">229</th><td><b>struct</b> <dfn class="type def" id="svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</dfn> {</td></tr>
<tr><th id="230">230</th><td>	<b>struct</b> <a class="type" href="../types.h.html#list_head" title='list_head' data-ref="list_head" data-ref-filename="list_head">list_head</a>	<dfn class="decl field" id="svc_rqst::rq_all" title='svc_rqst::rq_all' data-ref="svc_rqst::rq_all" data-ref-filename="svc_rqst..rq_all">rq_all</dfn>;		<i>/* all threads list */</i></td></tr>
<tr><th id="231">231</th><td>	<b>struct</b> <a class="macro" href="../types.h.html#228" title="callback_head" data-ref="_M/rcu_head">rcu_head</a>		<dfn class="decl field" id="svc_rqst::rq_rcu_head" title='svc_rqst::rq_rcu_head' data-ref="svc_rqst::rq_rcu_head" data-ref-filename="svc_rqst..rq_rcu_head">rq_rcu_head</dfn>;	<i>/* for RCU deferred kfree */</i></td></tr>
<tr><th id="232">232</th><td>	<b>struct</b> <a class="type" href="xprt.h.html#svc_xprt" title='svc_xprt' data-ref="svc_xprt" data-ref-filename="svc_xprt">svc_xprt</a> *	<dfn class="decl field" id="svc_rqst::rq_xprt" title='svc_rqst::rq_xprt' data-ref="svc_rqst::rq_xprt" data-ref-filename="svc_rqst..rq_xprt">rq_xprt</dfn>;	<i>/* transport ptr */</i></td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td>	<b>struct</b> <a class="macro" href="../socket.h.html#40" title="__kernel_sockaddr_storage" data-ref="_M/sockaddr_storage">sockaddr_storage</a>	<dfn class="decl field" id="svc_rqst::rq_addr" title='svc_rqst::rq_addr' data-ref="svc_rqst::rq_addr" data-ref-filename="svc_rqst..rq_addr">rq_addr</dfn>;	<i>/* peer address */</i></td></tr>
<tr><th id="235">235</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_rqst::rq_addrlen" title='svc_rqst::rq_addrlen' data-ref="svc_rqst::rq_addrlen" data-ref-filename="svc_rqst..rq_addrlen">rq_addrlen</dfn>;</td></tr>
<tr><th id="236">236</th><td>	<b>struct</b> <a class="macro" href="../socket.h.html#40" title="__kernel_sockaddr_storage" data-ref="_M/sockaddr_storage">sockaddr_storage</a>	<dfn class="decl field" id="svc_rqst::rq_daddr" title='svc_rqst::rq_daddr' data-ref="svc_rqst::rq_daddr" data-ref-filename="svc_rqst..rq_daddr">rq_daddr</dfn>;	<i>/* dest addr of request</i></td></tr>
<tr><th id="237">237</th><td><i>						 *  - reply from here */</i></td></tr>
<tr><th id="238">238</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_rqst::rq_daddrlen" title='svc_rqst::rq_daddrlen' data-ref="svc_rqst::rq_daddrlen" data-ref-filename="svc_rqst..rq_daddrlen">rq_daddrlen</dfn>;</td></tr>
<tr><th id="239">239</th><td></td></tr>
<tr><th id="240">240</th><td>	<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *	<dfn class="decl field" id="svc_rqst::rq_server" title='svc_rqst::rq_server' data-ref="svc_rqst::rq_server" data-ref-filename="svc_rqst..rq_server">rq_server</dfn>;	<i>/* RPC service definition */</i></td></tr>
<tr><th id="241">241</th><td>	<b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *	<dfn class="decl field" id="svc_rqst::rq_pool" title='svc_rqst::rq_pool' data-ref="svc_rqst::rq_pool" data-ref-filename="svc_rqst..rq_pool">rq_pool</dfn>;	<i>/* thread pool */</i></td></tr>
<tr><th id="242">242</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#svc_procedure" title='svc_procedure' data-ref="svc_procedure" data-ref-filename="svc_procedure">svc_procedure</a> *<dfn class="decl field" id="svc_rqst::rq_procinfo" title='svc_rqst::rq_procinfo' data-ref="svc_rqst::rq_procinfo" data-ref-filename="svc_rqst..rq_procinfo">rq_procinfo</dfn>;<i>/* procedure info */</i></td></tr>
<tr><th id="243">243</th><td>	<b>struct</b> <a class="type" href="svcauth.h.html#auth_ops" title='auth_ops' data-ref="auth_ops" data-ref-filename="auth_ops">auth_ops</a> *	<dfn class="decl field" id="svc_rqst::rq_authop" title='svc_rqst::rq_authop' data-ref="svc_rqst::rq_authop" data-ref-filename="svc_rqst..rq_authop">rq_authop</dfn>;	<i>/* authentication flavour */</i></td></tr>
<tr><th id="244">244</th><td>	<b>struct</b> <a class="type" href="svcauth.h.html#svc_cred" title='svc_cred' data-ref="svc_cred" data-ref-filename="svc_cred">svc_cred</a>		<dfn class="decl field" id="svc_rqst::rq_cred" title='svc_rqst::rq_cred' data-ref="svc_rqst::rq_cred" data-ref-filename="svc_rqst..rq_cred">rq_cred</dfn>;	<i>/* auth info */</i></td></tr>
<tr><th id="245">245</th><td>	<em>void</em> *			<dfn class="decl field" id="svc_rqst::rq_xprt_ctxt" title='svc_rqst::rq_xprt_ctxt' data-ref="svc_rqst::rq_xprt_ctxt" data-ref-filename="svc_rqst..rq_xprt_ctxt">rq_xprt_ctxt</dfn>;	<i>/* transport specific context ptr */</i></td></tr>
<tr><th id="246">246</th><td>	<b>struct</b> <a class="type" href="#svc_deferred_req" title='svc_deferred_req' data-ref="svc_deferred_req" data-ref-filename="svc_deferred_req">svc_deferred_req</a>*<dfn class="decl field" id="svc_rqst::rq_deferred" title='svc_rqst::rq_deferred' data-ref="svc_rqst::rq_deferred" data-ref-filename="svc_rqst..rq_deferred">rq_deferred</dfn>;	<i>/* deferred request we are replaying */</i></td></tr>
<tr><th id="247">247</th><td></td></tr>
<tr><th id="248">248</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_rqst::rq_xprt_hlen" title='svc_rqst::rq_xprt_hlen' data-ref="svc_rqst::rq_xprt_hlen" data-ref-filename="svc_rqst..rq_xprt_hlen">rq_xprt_hlen</dfn>;	<i>/* xprt header len */</i></td></tr>
<tr><th id="249">249</th><td>	<b>struct</b> <a class="type" href="xdr.h.html#xdr_buf" title='xdr_buf' data-ref="xdr_buf" data-ref-filename="xdr_buf">xdr_buf</a>		<dfn class="decl field" id="svc_rqst::rq_arg" title='svc_rqst::rq_arg' data-ref="svc_rqst::rq_arg" data-ref-filename="svc_rqst..rq_arg">rq_arg</dfn>;</td></tr>
<tr><th id="250">250</th><td>	<b>struct</b> <a class="type" href="xdr.h.html#xdr_buf" title='xdr_buf' data-ref="xdr_buf" data-ref-filename="xdr_buf">xdr_buf</a>		<dfn class="decl field" id="svc_rqst::rq_res" title='svc_rqst::rq_res' data-ref="svc_rqst::rq_res" data-ref-filename="svc_rqst..rq_res">rq_res</dfn>;</td></tr>
<tr><th id="251">251</th><td>	<b>struct</b> <a class="type" href="../mm_types.h.html#page" title='page' data-ref="page" data-ref-filename="page">page</a>		*<dfn class="decl field" id="svc_rqst::rq_pages" title='svc_rqst::rq_pages' data-ref="svc_rqst::rq_pages" data-ref-filename="svc_rqst..rq_pages">rq_pages</dfn>[<a class="macro" href="#181" title="(((1*1024*1024u)+((1UL) &lt;&lt; 12)-1)/((1UL) &lt;&lt; 12) + 2 + 1)" data-ref="_M/RPCSVC_MAXPAGES">RPCSVC_MAXPAGES</a> + <var>1</var>];</td></tr>
<tr><th id="252">252</th><td>	<b>struct</b> <a class="type" href="../mm_types.h.html#page" title='page' data-ref="page" data-ref-filename="page">page</a> *		*<dfn class="decl field" id="svc_rqst::rq_respages" title='svc_rqst::rq_respages' data-ref="svc_rqst::rq_respages" data-ref-filename="svc_rqst..rq_respages">rq_respages</dfn>;	<i>/* points into rq_pages */</i></td></tr>
<tr><th id="253">253</th><td>	<b>struct</b> <a class="type" href="../mm_types.h.html#page" title='page' data-ref="page" data-ref-filename="page">page</a> *		*<dfn class="decl field" id="svc_rqst::rq_next_page" title='svc_rqst::rq_next_page' data-ref="svc_rqst::rq_next_page" data-ref-filename="svc_rqst..rq_next_page">rq_next_page</dfn>; <i>/* next reply page to use */</i></td></tr>
<tr><th id="254">254</th><td>	<b>struct</b> <a class="type" href="../mm_types.h.html#page" title='page' data-ref="page" data-ref-filename="page">page</a> *		*<dfn class="decl field" id="svc_rqst::rq_page_end" title='svc_rqst::rq_page_end' data-ref="svc_rqst::rq_page_end" data-ref-filename="svc_rqst..rq_page_end">rq_page_end</dfn>;  <i>/* one past the last page */</i></td></tr>
<tr><th id="255">255</th><td></td></tr>
<tr><th id="256">256</th><td>	<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a>		<dfn class="decl field" id="svc_rqst::rq_vec" title='svc_rqst::rq_vec' data-ref="svc_rqst::rq_vec" data-ref-filename="svc_rqst..rq_vec">rq_vec</dfn>[<a class="macro" href="#181" title="(((1*1024*1024u)+((1UL) &lt;&lt; 12)-1)/((1UL) &lt;&lt; 12) + 2 + 1)" data-ref="_M/RPCSVC_MAXPAGES">RPCSVC_MAXPAGES</a>]; <i>/* generally useful.. */</i></td></tr>
<tr><th id="257">257</th><td></td></tr>
<tr><th id="258">258</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>			<dfn class="decl field" id="svc_rqst::rq_xid" title='svc_rqst::rq_xid' data-ref="svc_rqst::rq_xid" data-ref-filename="svc_rqst..rq_xid">rq_xid</dfn>;		<i>/* transmission id */</i></td></tr>
<tr><th id="259">259</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_rqst::rq_prog" title='svc_rqst::rq_prog' data-ref="svc_rqst::rq_prog" data-ref-filename="svc_rqst..rq_prog">rq_prog</dfn>;	<i>/* program number */</i></td></tr>
<tr><th id="260">260</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_rqst::rq_vers" title='svc_rqst::rq_vers' data-ref="svc_rqst::rq_vers" data-ref-filename="svc_rqst..rq_vers">rq_vers</dfn>;	<i>/* program version */</i></td></tr>
<tr><th id="261">261</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_rqst::rq_proc" title='svc_rqst::rq_proc' data-ref="svc_rqst::rq_proc" data-ref-filename="svc_rqst..rq_proc">rq_proc</dfn>;	<i>/* procedure number */</i></td></tr>
<tr><th id="262">262</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_rqst::rq_prot" title='svc_rqst::rq_prot' data-ref="svc_rqst::rq_prot" data-ref-filename="svc_rqst..rq_prot">rq_prot</dfn>;	<i>/* IP protocol */</i></td></tr>
<tr><th id="263">263</th><td>	<em>int</em>			<dfn class="decl field" id="svc_rqst::rq_cachetype" title='svc_rqst::rq_cachetype' data-ref="svc_rqst::rq_cachetype" data-ref-filename="svc_rqst..rq_cachetype">rq_cachetype</dfn>;	<i>/* catering to nfsd */</i></td></tr>
<tr><th id="264">264</th><td><u>#define	<dfn class="macro" id="_M/RQ_SECURE" data-ref="_M/RQ_SECURE">RQ_SECURE</dfn>	(0)			/* secure port */</u></td></tr>
<tr><th id="265">265</th><td><u>#define	<dfn class="macro" id="_M/RQ_LOCAL" data-ref="_M/RQ_LOCAL">RQ_LOCAL</dfn>	(1)			/* local request */</u></td></tr>
<tr><th id="266">266</th><td><u>#define	<dfn class="macro" id="_M/RQ_USEDEFERRAL" data-ref="_M/RQ_USEDEFERRAL">RQ_USEDEFERRAL</dfn>	(2)			/* use deferral */</u></td></tr>
<tr><th id="267">267</th><td><u>#define	<dfn class="macro" id="_M/RQ_DROPME" data-ref="_M/RQ_DROPME">RQ_DROPME</dfn>	(3)			/* drop current reply */</u></td></tr>
<tr><th id="268">268</th><td><u>#define	<dfn class="macro" id="_M/RQ_SPLICE_OK" data-ref="_M/RQ_SPLICE_OK">RQ_SPLICE_OK</dfn>	(4)			/* turned off in gss privacy</u></td></tr>
<tr><th id="269">269</th><td><u>						 * to prevent encrypting page</u></td></tr>
<tr><th id="270">270</th><td><u>						 * cache pages */</u></td></tr>
<tr><th id="271">271</th><td><u>#define	<dfn class="macro" id="_M/RQ_VICTIM" data-ref="_M/RQ_VICTIM">RQ_VICTIM</dfn>	(5)			/* about to be shut down */</u></td></tr>
<tr><th id="272">272</th><td><u>#define	<dfn class="macro" id="_M/RQ_BUSY" data-ref="_M/RQ_BUSY">RQ_BUSY</dfn>		(6)			/* request is busy */</u></td></tr>
<tr><th id="273">273</th><td><u>#define	<dfn class="macro" id="_M/RQ_DATA" data-ref="_M/RQ_DATA">RQ_DATA</dfn>		(7)			/* request has data */</u></td></tr>
<tr><th id="274">274</th><td>	<em>unsigned</em> <em>long</em>		<dfn class="decl field" id="svc_rqst::rq_flags" title='svc_rqst::rq_flags' data-ref="svc_rqst::rq_flags" data-ref-filename="svc_rqst..rq_flags">rq_flags</dfn>;	<i>/* flags field */</i></td></tr>
<tr><th id="275">275</th><td></td></tr>
<tr><th id="276">276</th><td>	<em>void</em> *			<dfn class="decl field" id="svc_rqst::rq_argp" title='svc_rqst::rq_argp' data-ref="svc_rqst::rq_argp" data-ref-filename="svc_rqst..rq_argp">rq_argp</dfn>;	<i>/* decoded arguments */</i></td></tr>
<tr><th id="277">277</th><td>	<em>void</em> *			<dfn class="decl field" id="svc_rqst::rq_resp" title='svc_rqst::rq_resp' data-ref="svc_rqst::rq_resp" data-ref-filename="svc_rqst..rq_resp">rq_resp</dfn>;	<i>/* xdr'd results */</i></td></tr>
<tr><th id="278">278</th><td>	<em>void</em> *			<dfn class="decl field" id="svc_rqst::rq_auth_data" title='svc_rqst::rq_auth_data' data-ref="svc_rqst::rq_auth_data" data-ref-filename="svc_rqst..rq_auth_data">rq_auth_data</dfn>;	<i>/* flavor-specific data */</i></td></tr>
<tr><th id="279">279</th><td>	<em>int</em>			<dfn class="decl field" id="svc_rqst::rq_auth_slack" title='svc_rqst::rq_auth_slack' data-ref="svc_rqst::rq_auth_slack" data-ref-filename="svc_rqst..rq_auth_slack">rq_auth_slack</dfn>;	<i>/* extra space xdr code</i></td></tr>
<tr><th id="280">280</th><td><i>						 * should leave in head</i></td></tr>
<tr><th id="281">281</th><td><i>						 * for krb5i, krb5p.</i></td></tr>
<tr><th id="282">282</th><td><i>						 */</i></td></tr>
<tr><th id="283">283</th><td>	<em>int</em>			<dfn class="decl field" id="svc_rqst::rq_reserved" title='svc_rqst::rq_reserved' data-ref="svc_rqst::rq_reserved" data-ref-filename="svc_rqst..rq_reserved">rq_reserved</dfn>;	<i>/* space on socket outq</i></td></tr>
<tr><th id="284">284</th><td><i>						 * reserved for this request</i></td></tr>
<tr><th id="285">285</th><td><i>						 */</i></td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td>	<b>struct</b> <a class="type" href="cache.h.html#cache_req" title='cache_req' data-ref="cache_req" data-ref-filename="cache_req">cache_req</a>	<dfn class="decl field" id="svc_rqst::rq_chandle" title='svc_rqst::rq_chandle' data-ref="svc_rqst::rq_chandle" data-ref-filename="svc_rqst..rq_chandle">rq_chandle</dfn>;	<i>/* handle passed to caches for </i></td></tr>
<tr><th id="288">288</th><td><i>						 * request delaying </i></td></tr>
<tr><th id="289">289</th><td><i>						 */</i></td></tr>
<tr><th id="290">290</th><td>	<i>/* Catering to nfsd */</i></td></tr>
<tr><th id="291">291</th><td>	<b>struct</b> <a class="type" href="svcauth.h.html#auth_domain" title='auth_domain' data-ref="auth_domain" data-ref-filename="auth_domain">auth_domain</a> *	<dfn class="decl field" id="svc_rqst::rq_client" title='svc_rqst::rq_client' data-ref="svc_rqst::rq_client" data-ref-filename="svc_rqst..rq_client">rq_client</dfn>;	<i>/* RPC peer info */</i></td></tr>
<tr><th id="292">292</th><td>	<b>struct</b> <a class="type" href="svcauth.h.html#auth_domain" title='auth_domain' data-ref="auth_domain" data-ref-filename="auth_domain">auth_domain</a> *	<dfn class="decl field" id="svc_rqst::rq_gssclient" title='svc_rqst::rq_gssclient' data-ref="svc_rqst::rq_gssclient" data-ref-filename="svc_rqst..rq_gssclient">rq_gssclient</dfn>;	<i>/* "gss/"-style peer info */</i></td></tr>
<tr><th id="293">293</th><td>	<b>struct</b> <dfn class="type" id="svc_cacherep" title='svc_cacherep' data-ref="svc_cacherep" data-ref-filename="svc_cacherep"><a class="type" href="#svc_cacherep" title='svc_cacherep' data-ref="svc_cacherep" data-ref-filename="svc_cacherep">svc_cacherep</a></dfn> *	<dfn class="decl field" id="svc_rqst::rq_cacherep" title='svc_rqst::rq_cacherep' data-ref="svc_rqst::rq_cacherep" data-ref-filename="svc_rqst..rq_cacherep">rq_cacherep</dfn>;	<i>/* cache info */</i></td></tr>
<tr><th id="294">294</th><td>	<b>struct</b> <a class="type" href="../sched.h.html#task_struct" title='task_struct' data-ref="task_struct" data-ref-filename="task_struct">task_struct</a>	*<dfn class="decl field" id="svc_rqst::rq_task" title='svc_rqst::rq_task' data-ref="svc_rqst::rq_task" data-ref-filename="svc_rqst..rq_task">rq_task</dfn>;	<i>/* service thread */</i></td></tr>
<tr><th id="295">295</th><td>	<a class="typedef" href="../spinlock_types.h.html#spinlock_t" title='spinlock_t' data-type='struct spinlock' data-ref="spinlock_t" data-ref-filename="spinlock_t">spinlock_t</a>		<dfn class="decl field" id="svc_rqst::rq_lock" title='svc_rqst::rq_lock' data-ref="svc_rqst::rq_lock" data-ref-filename="svc_rqst..rq_lock">rq_lock</dfn>;	<i>/* per-request lock */</i></td></tr>
<tr><th id="296">296</th><td>};</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td><u>#define <dfn class="macro" id="_M/SVC_NET" data-ref="_M/SVC_NET">SVC_NET</dfn>(svc_rqst)	(svc_rqst-&gt;rq_xprt-&gt;xpt_net)</u></td></tr>
<tr><th id="299">299</th><td></td></tr>
<tr><th id="300">300</th><td><i>/*</i></td></tr>
<tr><th id="301">301</th><td><i> * Rigorous type checking on sockaddr type conversions</i></td></tr>
<tr><th id="302">302</th><td><i> */</i></td></tr>
<tr><th id="303">303</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../../uapi/linux/in.h.html#sockaddr_in" title='sockaddr_in' data-ref="sockaddr_in" data-ref-filename="sockaddr_in">sockaddr_in</a> *<dfn class="decl def fn" id="svc_addr_in" title='svc_addr_in' data-ref="svc_addr_in" data-ref-filename="svc_addr_in">svc_addr_in</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col8 decl" id="558rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="558rqst" data-ref-filename="558rqst">rqst</dfn>)</td></tr>
<tr><th id="304">304</th><td>{</td></tr>
<tr><th id="305">305</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../../uapi/linux/in.h.html#sockaddr_in" title='sockaddr_in' data-ref="sockaddr_in" data-ref-filename="sockaddr_in">sockaddr_in</a> *) &amp;<a class="local col8 ref" href="#558rqst" title='rqst' data-ref="558rqst" data-ref-filename="558rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_addr" title='svc_rqst::rq_addr' data-ref="svc_rqst::rq_addr" data-ref-filename="svc_rqst..rq_addr">rq_addr</a>;</td></tr>
<tr><th id="306">306</th><td>}</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../../uapi/linux/in6.h.html#sockaddr_in6" title='sockaddr_in6' data-ref="sockaddr_in6" data-ref-filename="sockaddr_in6">sockaddr_in6</a> *<dfn class="decl def fn" id="svc_addr_in6" title='svc_addr_in6' data-ref="svc_addr_in6" data-ref-filename="svc_addr_in6">svc_addr_in6</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col9 decl" id="559rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="559rqst" data-ref-filename="559rqst">rqst</dfn>)</td></tr>
<tr><th id="309">309</th><td>{</td></tr>
<tr><th id="310">310</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../../uapi/linux/in6.h.html#sockaddr_in6" title='sockaddr_in6' data-ref="sockaddr_in6" data-ref-filename="sockaddr_in6">sockaddr_in6</a> *) &amp;<a class="local col9 ref" href="#559rqst" title='rqst' data-ref="559rqst" data-ref-filename="559rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_addr" title='svc_rqst::rq_addr' data-ref="svc_rqst::rq_addr" data-ref-filename="svc_rqst..rq_addr">rq_addr</a>;</td></tr>
<tr><th id="311">311</th><td>}</td></tr>
<tr><th id="312">312</th><td></td></tr>
<tr><th id="313">313</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../socket.h.html#sockaddr" title='sockaddr' data-ref="sockaddr" data-ref-filename="sockaddr">sockaddr</a> *<dfn class="decl def fn" id="svc_addr" title='svc_addr' data-ref="svc_addr" data-ref-filename="svc_addr">svc_addr</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col0 decl" id="560rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="560rqst" data-ref-filename="560rqst">rqst</dfn>)</td></tr>
<tr><th id="314">314</th><td>{</td></tr>
<tr><th id="315">315</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../socket.h.html#sockaddr" title='sockaddr' data-ref="sockaddr" data-ref-filename="sockaddr">sockaddr</a> *) &amp;<a class="local col0 ref" href="#560rqst" title='rqst' data-ref="560rqst" data-ref-filename="560rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_addr" title='svc_rqst::rq_addr' data-ref="svc_rqst::rq_addr" data-ref-filename="svc_rqst..rq_addr">rq_addr</a>;</td></tr>
<tr><th id="316">316</th><td>}</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../../uapi/linux/in.h.html#sockaddr_in" title='sockaddr_in' data-ref="sockaddr_in" data-ref-filename="sockaddr_in">sockaddr_in</a> *<dfn class="decl def fn" id="svc_daddr_in" title='svc_daddr_in' data-ref="svc_daddr_in" data-ref-filename="svc_daddr_in">svc_daddr_in</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col1 decl" id="561rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="561rqst" data-ref-filename="561rqst">rqst</dfn>)</td></tr>
<tr><th id="319">319</th><td>{</td></tr>
<tr><th id="320">320</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../../uapi/linux/in.h.html#sockaddr_in" title='sockaddr_in' data-ref="sockaddr_in" data-ref-filename="sockaddr_in">sockaddr_in</a> *) &amp;<a class="local col1 ref" href="#561rqst" title='rqst' data-ref="561rqst" data-ref-filename="561rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_daddr" title='svc_rqst::rq_daddr' data-ref="svc_rqst::rq_daddr" data-ref-filename="svc_rqst..rq_daddr">rq_daddr</a>;</td></tr>
<tr><th id="321">321</th><td>}</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../../uapi/linux/in6.h.html#sockaddr_in6" title='sockaddr_in6' data-ref="sockaddr_in6" data-ref-filename="sockaddr_in6">sockaddr_in6</a> *<dfn class="decl def fn" id="svc_daddr_in6" title='svc_daddr_in6' data-ref="svc_daddr_in6" data-ref-filename="svc_daddr_in6">svc_daddr_in6</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col2 decl" id="562rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="562rqst" data-ref-filename="562rqst">rqst</dfn>)</td></tr>
<tr><th id="324">324</th><td>{</td></tr>
<tr><th id="325">325</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../../uapi/linux/in6.h.html#sockaddr_in6" title='sockaddr_in6' data-ref="sockaddr_in6" data-ref-filename="sockaddr_in6">sockaddr_in6</a> *) &amp;<a class="local col2 ref" href="#562rqst" title='rqst' data-ref="562rqst" data-ref-filename="562rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_daddr" title='svc_rqst::rq_daddr' data-ref="svc_rqst::rq_daddr" data-ref-filename="svc_rqst..rq_daddr">rq_daddr</a>;</td></tr>
<tr><th id="326">326</th><td>}</td></tr>
<tr><th id="327">327</th><td></td></tr>
<tr><th id="328">328</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <b>struct</b> <a class="type" href="../socket.h.html#sockaddr" title='sockaddr' data-ref="sockaddr" data-ref-filename="sockaddr">sockaddr</a> *<dfn class="decl def fn" id="svc_daddr" title='svc_daddr' data-ref="svc_daddr" data-ref-filename="svc_daddr">svc_daddr</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col3 decl" id="563rqst" title='rqst' data-type='const struct svc_rqst *' data-ref="563rqst" data-ref-filename="563rqst">rqst</dfn>)</td></tr>
<tr><th id="329">329</th><td>{</td></tr>
<tr><th id="330">330</th><td>	<b>return</b> (<b>struct</b> <a class="type" href="../socket.h.html#sockaddr" title='sockaddr' data-ref="sockaddr" data-ref-filename="sockaddr">sockaddr</a> *) &amp;<a class="local col3 ref" href="#563rqst" title='rqst' data-ref="563rqst" data-ref-filename="563rqst">rqst</a>-&gt;<a class="ref field" href="#svc_rqst::rq_daddr" title='svc_rqst::rq_daddr' data-ref="svc_rqst::rq_daddr" data-ref-filename="svc_rqst..rq_daddr">rq_daddr</a>;</td></tr>
<tr><th id="331">331</th><td>}</td></tr>
<tr><th id="332">332</th><td></td></tr>
<tr><th id="333">333</th><td><i>/*</i></td></tr>
<tr><th id="334">334</th><td><i> * Check buffer bounds after decoding arguments</i></td></tr>
<tr><th id="335">335</th><td><i> */</i></td></tr>
<tr><th id="336">336</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em></td></tr>
<tr><th id="337">337</th><td><dfn class="decl def fn" id="xdr_argsize_check" title='xdr_argsize_check' data-ref="xdr_argsize_check" data-ref-filename="xdr_argsize_check">xdr_argsize_check</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col4 decl" id="564rqstp" title='rqstp' data-type='struct svc_rqst *' data-ref="564rqstp" data-ref-filename="564rqstp">rqstp</dfn>, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col5 decl" id="565p" title='p' data-type='__be32 *' data-ref="565p" data-ref-filename="565p">p</dfn>)</td></tr>
<tr><th id="338">338</th><td>{</td></tr>
<tr><th id="339">339</th><td>	<em>char</em> *<dfn class="local col6 decl" id="566cp" title='cp' data-type='char *' data-ref="566cp" data-ref-filename="566cp">cp</dfn> = (<em>char</em> *)<a class="local col5 ref" href="#565p" title='p' data-ref="565p" data-ref-filename="565p">p</a>;</td></tr>
<tr><th id="340">340</th><td>	<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col7 decl" id="567vec" title='vec' data-type='struct kvec *' data-ref="567vec" data-ref-filename="567vec">vec</dfn> = &amp;<a class="local col4 ref" href="#564rqstp" title='rqstp' data-ref="564rqstp" data-ref-filename="564rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_arg" title='svc_rqst::rq_arg' data-ref="svc_rqst::rq_arg" data-ref-filename="svc_rqst..rq_arg">rq_arg</a>.<a class="ref field" href="xdr.h.html#xdr_buf::head" title='xdr_buf::head' data-ref="xdr_buf::head" data-ref-filename="xdr_buf..head">head</a>[<var>0</var>];</td></tr>
<tr><th id="341">341</th><td>	<b>return</b> <a class="local col6 ref" href="#566cp" title='cp' data-ref="566cp" data-ref-filename="566cp">cp</a> &gt;= (<em>char</em>*)<a class="local col7 ref" href="#567vec" title='vec' data-ref="567vec" data-ref-filename="567vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a></td></tr>
<tr><th id="342">342</th><td>		&amp;&amp; <a class="local col6 ref" href="#566cp" title='cp' data-ref="566cp" data-ref-filename="566cp">cp</a> &lt;= (<em>char</em>*)<a class="local col7 ref" href="#567vec" title='vec' data-ref="567vec" data-ref-filename="567vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a> + <a class="local col7 ref" href="#567vec" title='vec' data-ref="567vec" data-ref-filename="567vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a>;</td></tr>
<tr><th id="343">343</th><td>}</td></tr>
<tr><th id="344">344</th><td></td></tr>
<tr><th id="345">345</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em></td></tr>
<tr><th id="346">346</th><td><dfn class="decl def fn" id="xdr_ressize_check" title='xdr_ressize_check' data-ref="xdr_ressize_check" data-ref-filename="xdr_ressize_check">xdr_ressize_check</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col8 decl" id="568rqstp" title='rqstp' data-type='struct svc_rqst *' data-ref="568rqstp" data-ref-filename="568rqstp">rqstp</dfn>, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col9 decl" id="569p" title='p' data-type='__be32 *' data-ref="569p" data-ref-filename="569p">p</dfn>)</td></tr>
<tr><th id="347">347</th><td>{</td></tr>
<tr><th id="348">348</th><td>	<b>struct</b> <a class="type" href="../uio.h.html#kvec" title='kvec' data-ref="kvec" data-ref-filename="kvec">kvec</a> *<dfn class="local col0 decl" id="570vec" title='vec' data-type='struct kvec *' data-ref="570vec" data-ref-filename="570vec">vec</dfn> = &amp;<a class="local col8 ref" href="#568rqstp" title='rqstp' data-ref="568rqstp" data-ref-filename="568rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_res" title='svc_rqst::rq_res' data-ref="svc_rqst::rq_res" data-ref-filename="svc_rqst..rq_res">rq_res</a>.<a class="ref field" href="xdr.h.html#xdr_buf::head" title='xdr_buf::head' data-ref="xdr_buf::head" data-ref-filename="xdr_buf..head">head</a>[<var>0</var>];</td></tr>
<tr><th id="349">349</th><td>	<em>char</em> *<dfn class="local col1 decl" id="571cp" title='cp' data-type='char *' data-ref="571cp" data-ref-filename="571cp">cp</dfn> = (<em>char</em>*)<a class="local col9 ref" href="#569p" title='p' data-ref="569p" data-ref-filename="569p">p</a>;</td></tr>
<tr><th id="350">350</th><td></td></tr>
<tr><th id="351">351</th><td>	<a class="local col0 ref" href="#570vec" title='vec' data-ref="570vec" data-ref-filename="570vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> = <a class="local col1 ref" href="#571cp" title='cp' data-ref="571cp" data-ref-filename="571cp">cp</a> - (<em>char</em>*)<a class="local col0 ref" href="#570vec" title='vec' data-ref="570vec" data-ref-filename="570vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_base" title='kvec::iov_base' data-ref="kvec::iov_base" data-ref-filename="kvec..iov_base">iov_base</a>;</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td>	<b>return</b> <a class="local col0 ref" href="#570vec" title='vec' data-ref="570vec" data-ref-filename="570vec">vec</a>-&gt;<a class="ref field" href="../uio.h.html#kvec::iov_len" title='kvec::iov_len' data-ref="kvec::iov_len" data-ref-filename="kvec..iov_len">iov_len</a> &lt;= <a class="macro" href="../../../arch/x86/include/asm/page_types.h.html#11" title="((1UL) &lt;&lt; 12)" data-ref="_M/PAGE_SIZE">PAGE_SIZE</a>;</td></tr>
<tr><th id="354">354</th><td>}</td></tr>
<tr><th id="355">355</th><td></td></tr>
<tr><th id="356">356</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_free_res_pages" title='svc_free_res_pages' data-ref="svc_free_res_pages" data-ref-filename="svc_free_res_pages">svc_free_res_pages</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col2 decl" id="572rqstp" title='rqstp' data-type='struct svc_rqst *' data-ref="572rqstp" data-ref-filename="572rqstp">rqstp</dfn>)</td></tr>
<tr><th id="357">357</th><td>{</td></tr>
<tr><th id="358">358</th><td>	<b>while</b> (<a class="local col2 ref" href="#572rqstp" title='rqstp' data-ref="572rqstp" data-ref-filename="572rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_next_page" title='svc_rqst::rq_next_page' data-ref="svc_rqst::rq_next_page" data-ref-filename="svc_rqst..rq_next_page">rq_next_page</a> != <a class="local col2 ref" href="#572rqstp" title='rqstp' data-ref="572rqstp" data-ref-filename="572rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_respages" title='svc_rqst::rq_respages' data-ref="svc_rqst::rq_respages" data-ref-filename="svc_rqst..rq_respages">rq_respages</a>) {</td></tr>
<tr><th id="359">359</th><td>		<b>struct</b> <a class="type" href="../mm_types.h.html#page" title='page' data-ref="page" data-ref-filename="page">page</a> **<dfn class="local col3 decl" id="573pp" title='pp' data-type='struct page **' data-ref="573pp" data-ref-filename="573pp">pp</dfn> = --<a class="local col2 ref" href="#572rqstp" title='rqstp' data-ref="572rqstp" data-ref-filename="572rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_next_page" title='svc_rqst::rq_next_page' data-ref="svc_rqst::rq_next_page" data-ref-filename="svc_rqst..rq_next_page">rq_next_page</a>;</td></tr>
<tr><th id="360">360</th><td>		<b>if</b> (*<a class="local col3 ref" href="#573pp" title='pp' data-ref="573pp" data-ref-filename="573pp">pp</a>) {</td></tr>
<tr><th id="361">361</th><td>			<a class="ref fn" href="../mm.h.html#put_page" title='put_page' data-ref="put_page" data-ref-filename="put_page">put_page</a>(*<a class="local col3 ref" href="#573pp" title='pp' data-ref="573pp" data-ref-filename="573pp">pp</a>);</td></tr>
<tr><th id="362">362</th><td>			*<a class="local col3 ref" href="#573pp" title='pp' data-ref="573pp" data-ref-filename="573pp">pp</a> = <a class="macro" href="../stddef.h.html#8" title="((void *)0)" data-ref="_M/NULL">NULL</a>;</td></tr>
<tr><th id="363">363</th><td>		}</td></tr>
<tr><th id="364">364</th><td>	}</td></tr>
<tr><th id="365">365</th><td>}</td></tr>
<tr><th id="366">366</th><td></td></tr>
<tr><th id="367">367</th><td><b>struct</b> <dfn class="type def" id="svc_deferred_req" title='svc_deferred_req' data-ref="svc_deferred_req" data-ref-filename="svc_deferred_req">svc_deferred_req</dfn> {</td></tr>
<tr><th id="368">368</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_deferred_req::prot" title='svc_deferred_req::prot' data-ref="svc_deferred_req::prot" data-ref-filename="svc_deferred_req..prot">prot</dfn>;	<i>/* protocol (UDP or TCP) */</i></td></tr>
<tr><th id="369">369</th><td>	<b>struct</b> <a class="type" href="xprt.h.html#svc_xprt" title='svc_xprt' data-ref="svc_xprt" data-ref-filename="svc_xprt">svc_xprt</a>		*<dfn class="decl field" id="svc_deferred_req::xprt" title='svc_deferred_req::xprt' data-ref="svc_deferred_req::xprt" data-ref-filename="svc_deferred_req..xprt">xprt</dfn>;</td></tr>
<tr><th id="370">370</th><td>	<b>struct</b> <a class="macro" href="../socket.h.html#40" title="__kernel_sockaddr_storage" data-ref="_M/sockaddr_storage">sockaddr_storage</a>	<dfn class="decl field" id="svc_deferred_req::addr" title='svc_deferred_req::addr' data-ref="svc_deferred_req::addr" data-ref-filename="svc_deferred_req..addr">addr</dfn>;	<i>/* where reply must go */</i></td></tr>
<tr><th id="371">371</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_deferred_req::addrlen" title='svc_deferred_req::addrlen' data-ref="svc_deferred_req::addrlen" data-ref-filename="svc_deferred_req..addrlen">addrlen</dfn>;</td></tr>
<tr><th id="372">372</th><td>	<b>struct</b> <a class="macro" href="../socket.h.html#40" title="__kernel_sockaddr_storage" data-ref="_M/sockaddr_storage">sockaddr_storage</a>	<dfn class="decl field" id="svc_deferred_req::daddr" title='svc_deferred_req::daddr' data-ref="svc_deferred_req::daddr" data-ref-filename="svc_deferred_req..daddr">daddr</dfn>;	<i>/* where reply must come from */</i></td></tr>
<tr><th id="373">373</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_deferred_req::daddrlen" title='svc_deferred_req::daddrlen' data-ref="svc_deferred_req::daddrlen" data-ref-filename="svc_deferred_req..daddrlen">daddrlen</dfn>;</td></tr>
<tr><th id="374">374</th><td>	<b>struct</b> <a class="type" href="cache.h.html#cache_deferred_req" title='cache_deferred_req' data-ref="cache_deferred_req" data-ref-filename="cache_deferred_req">cache_deferred_req</a> <dfn class="decl field" id="svc_deferred_req::handle" title='svc_deferred_req::handle' data-ref="svc_deferred_req::handle" data-ref-filename="svc_deferred_req..handle">handle</dfn>;</td></tr>
<tr><th id="375">375</th><td>	<a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>			<dfn class="decl field" id="svc_deferred_req::xprt_hlen" title='svc_deferred_req::xprt_hlen' data-ref="svc_deferred_req::xprt_hlen" data-ref-filename="svc_deferred_req..xprt_hlen">xprt_hlen</dfn>;</td></tr>
<tr><th id="376">376</th><td>	<em>int</em>			<dfn class="decl field" id="svc_deferred_req::argslen" title='svc_deferred_req::argslen' data-ref="svc_deferred_req::argslen" data-ref-filename="svc_deferred_req..argslen">argslen</dfn>;</td></tr>
<tr><th id="377">377</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>			<dfn class="decl field" id="svc_deferred_req::args" title='svc_deferred_req::args' data-ref="svc_deferred_req::args" data-ref-filename="svc_deferred_req..args">args</dfn>[<var>0</var>];</td></tr>
<tr><th id="378">378</th><td>};</td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td><i>/*</i></td></tr>
<tr><th id="381">381</th><td><i> * List of RPC programs on the same transport endpoint</i></td></tr>
<tr><th id="382">382</th><td><i> */</i></td></tr>
<tr><th id="383">383</th><td><b>struct</b> <dfn class="type def" id="svc_program" title='svc_program' data-ref="svc_program" data-ref-filename="svc_program">svc_program</dfn> {</td></tr>
<tr><th id="384">384</th><td>	<b>struct</b> <a class="type" href="#svc_program" title='svc_program' data-ref="svc_program" data-ref-filename="svc_program">svc_program</a> *	<dfn class="decl field" id="svc_program::pg_next" title='svc_program::pg_next' data-ref="svc_program::pg_next" data-ref-filename="svc_program..pg_next">pg_next</dfn>;	<i>/* other programs (same xprt) */</i></td></tr>
<tr><th id="385">385</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_program::pg_prog" title='svc_program::pg_prog' data-ref="svc_program::pg_prog" data-ref-filename="svc_program..pg_prog">pg_prog</dfn>;	<i>/* program number */</i></td></tr>
<tr><th id="386">386</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_program::pg_lovers" title='svc_program::pg_lovers' data-ref="svc_program::pg_lovers" data-ref-filename="svc_program..pg_lovers">pg_lovers</dfn>;	<i>/* lowest version */</i></td></tr>
<tr><th id="387">387</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_program::pg_hivers" title='svc_program::pg_hivers' data-ref="svc_program::pg_hivers" data-ref-filename="svc_program..pg_hivers">pg_hivers</dfn>;	<i>/* highest version */</i></td></tr>
<tr><th id="388">388</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_program::pg_nvers" title='svc_program::pg_nvers' data-ref="svc_program::pg_nvers" data-ref-filename="svc_program..pg_nvers">pg_nvers</dfn>;	<i>/* number of versions */</i></td></tr>
<tr><th id="389">389</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#svc_version" title='svc_version' data-ref="svc_version" data-ref-filename="svc_version">svc_version</a> **<dfn class="decl field" id="svc_program::pg_vers" title='svc_program::pg_vers' data-ref="svc_program::pg_vers" data-ref-filename="svc_program..pg_vers">pg_vers</dfn>;	<i>/* version array */</i></td></tr>
<tr><th id="390">390</th><td>	<em>char</em> *			<dfn class="decl field" id="svc_program::pg_name" title='svc_program::pg_name' data-ref="svc_program::pg_name" data-ref-filename="svc_program..pg_name">pg_name</dfn>;	<i>/* service name */</i></td></tr>
<tr><th id="391">391</th><td>	<em>char</em> *			<dfn class="decl field" id="svc_program::pg_class" title='svc_program::pg_class' data-ref="svc_program::pg_class" data-ref-filename="svc_program..pg_class">pg_class</dfn>;	<i>/* class name: services sharing authentication */</i></td></tr>
<tr><th id="392">392</th><td>	<b>struct</b> <a class="type" href="stats.h.html#svc_stat" title='svc_stat' data-ref="svc_stat" data-ref-filename="svc_stat">svc_stat</a> *	<dfn class="decl field" id="svc_program::pg_stats" title='svc_program::pg_stats' data-ref="svc_program::pg_stats" data-ref-filename="svc_program..pg_stats">pg_stats</dfn>;	<i>/* rpc statistics */</i></td></tr>
<tr><th id="393">393</th><td>	<em>int</em>			(*<dfn class="decl field" id="svc_program::pg_authenticate" title='svc_program::pg_authenticate' data-ref="svc_program::pg_authenticate" data-ref-filename="svc_program..pg_authenticate">pg_authenticate</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="394">394</th><td>};</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td><i>/*</i></td></tr>
<tr><th id="397">397</th><td><i> * RPC program version</i></td></tr>
<tr><th id="398">398</th><td><i> */</i></td></tr>
<tr><th id="399">399</th><td><b>struct</b> <dfn class="type def" id="svc_version" title='svc_version' data-ref="svc_version" data-ref-filename="svc_version">svc_version</dfn> {</td></tr>
<tr><th id="400">400</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_version::vs_vers" title='svc_version::vs_vers' data-ref="svc_version::vs_vers" data-ref-filename="svc_version..vs_vers">vs_vers</dfn>;	<i>/* version number */</i></td></tr>
<tr><th id="401">401</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_version::vs_nproc" title='svc_version::vs_nproc' data-ref="svc_version::vs_nproc" data-ref-filename="svc_version..vs_nproc">vs_nproc</dfn>;	<i>/* number of procedures */</i></td></tr>
<tr><th id="402">402</th><td>	<em>const</em> <b>struct</b> <a class="type" href="#svc_procedure" title='svc_procedure' data-ref="svc_procedure" data-ref-filename="svc_procedure">svc_procedure</a> *<dfn class="decl field" id="svc_version::vs_proc" title='svc_version::vs_proc' data-ref="svc_version::vs_proc" data-ref-filename="svc_version..vs_proc">vs_proc</dfn>;	<i>/* per-procedure info */</i></td></tr>
<tr><th id="403">403</th><td>	<em>unsigned</em> <em>int</em>		*<dfn class="decl field" id="svc_version::vs_count" title='svc_version::vs_count' data-ref="svc_version::vs_count" data-ref-filename="svc_version..vs_count">vs_count</dfn>;	<i>/* call counts */</i></td></tr>
<tr><th id="404">404</th><td>	<a class="typedef" href="../../asm-generic/int-ll64.h.html#u32" title='u32' data-type='unsigned int' data-ref="u32" data-ref-filename="u32">u32</a>			<dfn class="decl field" id="svc_version::vs_xdrsize" title='svc_version::vs_xdrsize' data-ref="svc_version::vs_xdrsize" data-ref-filename="svc_version..vs_xdrsize">vs_xdrsize</dfn>;	<i>/* xdrsize needed for this version */</i></td></tr>
<tr><th id="405">405</th><td></td></tr>
<tr><th id="406">406</th><td>	<i>/* Don't register with rpcbind */</i></td></tr>
<tr><th id="407">407</th><td>	<a class="typedef" href="../types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a>			<dfn class="decl field" id="svc_version::vs_hidden" title='svc_version::vs_hidden' data-ref="svc_version::vs_hidden" data-ref-filename="svc_version..vs_hidden">vs_hidden</dfn>;</td></tr>
<tr><th id="408">408</th><td></td></tr>
<tr><th id="409">409</th><td>	<i>/* Don't care if the rpcbind registration fails */</i></td></tr>
<tr><th id="410">410</th><td>	<a class="typedef" href="../types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a>			<dfn class="decl field" id="svc_version::vs_rpcb_optnl" title='svc_version::vs_rpcb_optnl' data-ref="svc_version::vs_rpcb_optnl" data-ref-filename="svc_version..vs_rpcb_optnl">vs_rpcb_optnl</dfn>;</td></tr>
<tr><th id="411">411</th><td></td></tr>
<tr><th id="412">412</th><td>	<i>/* Need xprt with congestion control */</i></td></tr>
<tr><th id="413">413</th><td>	<a class="typedef" href="../types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a>			<dfn class="decl field" id="svc_version::vs_need_cong_ctrl" title='svc_version::vs_need_cong_ctrl' data-ref="svc_version::vs_need_cong_ctrl" data-ref-filename="svc_version..vs_need_cong_ctrl">vs_need_cong_ctrl</dfn>;</td></tr>
<tr><th id="414">414</th><td></td></tr>
<tr><th id="415">415</th><td>	<i>/* Override dispatch function (e.g. when caching replies).</i></td></tr>
<tr><th id="416">416</th><td><i>	 * A return value of 0 means drop the request. </i></td></tr>
<tr><th id="417">417</th><td><i>	 * vs_dispatch == NULL means use default dispatcher.</i></td></tr>
<tr><th id="418">418</th><td><i>	 */</i></td></tr>
<tr><th id="419">419</th><td>	<em>int</em>			(*<dfn class="decl field" id="svc_version::vs_dispatch" title='svc_version::vs_dispatch' data-ref="svc_version::vs_dispatch" data-ref-filename="svc_version..vs_dispatch">vs_dispatch</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *);</td></tr>
<tr><th id="420">420</th><td>};</td></tr>
<tr><th id="421">421</th><td></td></tr>
<tr><th id="422">422</th><td><i>/*</i></td></tr>
<tr><th id="423">423</th><td><i> * RPC procedure info</i></td></tr>
<tr><th id="424">424</th><td><i> */</i></td></tr>
<tr><th id="425">425</th><td><b>struct</b> <dfn class="type def" id="svc_procedure" title='svc_procedure' data-ref="svc_procedure" data-ref-filename="svc_procedure">svc_procedure</dfn> {</td></tr>
<tr><th id="426">426</th><td>	<i>/* process the request: */</i></td></tr>
<tr><th id="427">427</th><td>	<a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a>			(*<dfn class="decl field" id="svc_procedure::pc_func" title='svc_procedure::pc_func' data-ref="svc_procedure::pc_func" data-ref-filename="svc_procedure..pc_func">pc_func</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="428">428</th><td>	<i>/* XDR decode args: */</i></td></tr>
<tr><th id="429">429</th><td>	<em>int</em>			(*<dfn class="decl field" id="svc_procedure::pc_decode" title='svc_procedure::pc_decode' data-ref="svc_procedure::pc_decode" data-ref-filename="svc_procedure..pc_decode">pc_decode</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col4 decl" id="574data" title='data' data-type='__be32 *' data-ref="574data" data-ref-filename="574data">data</dfn>);</td></tr>
<tr><th id="430">430</th><td>	<i>/* XDR encode result: */</i></td></tr>
<tr><th id="431">431</th><td>	<em>int</em>			(*<dfn class="decl field" id="svc_procedure::pc_encode" title='svc_procedure::pc_encode' data-ref="svc_procedure::pc_encode" data-ref-filename="svc_procedure..pc_encode">pc_encode</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *, <a class="typedef" href="../../uapi/linux/types.h.html#__be32" title='__be32' data-type='__u32' data-ref="__be32" data-ref-filename="__be32">__be32</a> *<dfn class="local col5 decl" id="575data" title='data' data-type='__be32 *' data-ref="575data" data-ref-filename="575data">data</dfn>);</td></tr>
<tr><th id="432">432</th><td>	<i>/* XDR free result: */</i></td></tr>
<tr><th id="433">433</th><td>	<em>void</em>			(*<dfn class="decl field" id="svc_procedure::pc_release" title='svc_procedure::pc_release' data-ref="svc_procedure::pc_release" data-ref-filename="svc_procedure..pc_release">pc_release</dfn>)(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="434">434</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_procedure::pc_argsize" title='svc_procedure::pc_argsize' data-ref="svc_procedure::pc_argsize" data-ref-filename="svc_procedure..pc_argsize">pc_argsize</dfn>;	<i>/* argument struct size */</i></td></tr>
<tr><th id="435">435</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_procedure::pc_ressize" title='svc_procedure::pc_ressize' data-ref="svc_procedure::pc_ressize" data-ref-filename="svc_procedure..pc_ressize">pc_ressize</dfn>;	<i>/* result struct size */</i></td></tr>
<tr><th id="436">436</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_procedure::pc_cachetype" title='svc_procedure::pc_cachetype' data-ref="svc_procedure::pc_cachetype" data-ref-filename="svc_procedure..pc_cachetype">pc_cachetype</dfn>;	<i>/* cache info (NFS) */</i></td></tr>
<tr><th id="437">437</th><td>	<em>unsigned</em> <em>int</em>		<dfn class="decl field" id="svc_procedure::pc_xdrressize" title='svc_procedure::pc_xdrressize' data-ref="svc_procedure::pc_xdrressize" data-ref-filename="svc_procedure..pc_xdrressize">pc_xdrressize</dfn>;	<i>/* maximum size of XDR reply */</i></td></tr>
<tr><th id="438">438</th><td>};</td></tr>
<tr><th id="439">439</th><td></td></tr>
<tr><th id="440">440</th><td><i>/*</i></td></tr>
<tr><th id="441">441</th><td><i> * Mode for mapping cpus to pools.</i></td></tr>
<tr><th id="442">442</th><td><i> */</i></td></tr>
<tr><th id="443">443</th><td><b>enum</b> {</td></tr>
<tr><th id="444">444</th><td>	<dfn class="enum" id="SVC_POOL_AUTO" title='SVC_POOL_AUTO' data-ref="SVC_POOL_AUTO" data-ref-filename="SVC_POOL_AUTO">SVC_POOL_AUTO</dfn> = -<var>1</var>,	<i>/* choose one of the others */</i></td></tr>
<tr><th id="445">445</th><td>	<dfn class="enum" id="SVC_POOL_GLOBAL" title='SVC_POOL_GLOBAL' data-ref="SVC_POOL_GLOBAL" data-ref-filename="SVC_POOL_GLOBAL">SVC_POOL_GLOBAL</dfn>,	<i>/* no mapping, just a single global pool</i></td></tr>
<tr><th id="446">446</th><td><i>				 * (legacy &amp; UP mode) */</i></td></tr>
<tr><th id="447">447</th><td>	<dfn class="enum" id="SVC_POOL_PERCPU" title='SVC_POOL_PERCPU' data-ref="SVC_POOL_PERCPU" data-ref-filename="SVC_POOL_PERCPU">SVC_POOL_PERCPU</dfn>,	<i>/* one pool per cpu */</i></td></tr>
<tr><th id="448">448</th><td>	<dfn class="enum" id="SVC_POOL_PERNODE" title='SVC_POOL_PERNODE' data-ref="SVC_POOL_PERNODE" data-ref-filename="SVC_POOL_PERNODE">SVC_POOL_PERNODE</dfn>	<i>/* one pool per numa node */</i></td></tr>
<tr><th id="449">449</th><td>};</td></tr>
<tr><th id="450">450</th><td></td></tr>
<tr><th id="451">451</th><td><b>struct</b> <dfn class="type def" id="svc_pool_map" title='svc_pool_map' data-ref="svc_pool_map" data-ref-filename="svc_pool_map">svc_pool_map</dfn> {</td></tr>
<tr><th id="452">452</th><td>	<em>int</em> <dfn class="decl field" id="svc_pool_map::count" title='svc_pool_map::count' data-ref="svc_pool_map::count" data-ref-filename="svc_pool_map..count">count</dfn>;			<i>/* How many svc_servs use us */</i></td></tr>
<tr><th id="453">453</th><td>	<em>int</em> <dfn class="decl field" id="svc_pool_map::mode" title='svc_pool_map::mode' data-ref="svc_pool_map::mode" data-ref-filename="svc_pool_map..mode">mode</dfn>;			<i>/* Note: int not enum to avoid</i></td></tr>
<tr><th id="454">454</th><td><i>					 * warnings about "enumeration value</i></td></tr>
<tr><th id="455">455</th><td><i>					 * not handled in switch" */</i></td></tr>
<tr><th id="456">456</th><td>	<em>unsigned</em> <em>int</em> <dfn class="decl field" id="svc_pool_map::npools" title='svc_pool_map::npools' data-ref="svc_pool_map::npools" data-ref-filename="svc_pool_map..npools">npools</dfn>;</td></tr>
<tr><th id="457">457</th><td>	<em>unsigned</em> <em>int</em> *<dfn class="decl field" id="svc_pool_map::pool_to" title='svc_pool_map::pool_to' data-ref="svc_pool_map::pool_to" data-ref-filename="svc_pool_map..pool_to">pool_to</dfn>;		<i>/* maps pool id to cpu or node */</i></td></tr>
<tr><th id="458">458</th><td>	<em>unsigned</em> <em>int</em> *<dfn class="decl field" id="svc_pool_map::to_pool" title='svc_pool_map::to_pool' data-ref="svc_pool_map::to_pool" data-ref-filename="svc_pool_map..to_pool">to_pool</dfn>;		<i>/* maps cpu or node to pool id */</i></td></tr>
<tr><th id="459">459</th><td>};</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td><b>extern</b> <b>struct</b> <a class="type" href="#svc_pool_map" title='svc_pool_map' data-ref="svc_pool_map" data-ref-filename="svc_pool_map">svc_pool_map</a> <dfn class="decl" id="svc_pool_map" title='svc_pool_map' data-ref="svc_pool_map" data-ref-filename="svc_pool_map">svc_pool_map</dfn>;</td></tr>
<tr><th id="462">462</th><td></td></tr>
<tr><th id="463">463</th><td><i>/*</i></td></tr>
<tr><th id="464">464</th><td><i> * Function prototypes.</i></td></tr>
<tr><th id="465">465</th><td><i> */</i></td></tr>
<tr><th id="466">466</th><td><em>int</em> <dfn class="decl fn" id="svc_rpcb_setup" title='svc_rpcb_setup' data-ref="svc_rpcb_setup" data-ref-filename="svc_rpcb_setup">svc_rpcb_setup</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col6 decl" id="576serv" title='serv' data-type='struct svc_serv *' data-ref="576serv" data-ref-filename="576serv">serv</dfn>, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *<dfn class="local col7 decl" id="577net" title='net' data-type='struct net *' data-ref="577net" data-ref-filename="577net">net</dfn>);</td></tr>
<tr><th id="467">467</th><td><em>void</em> <dfn class="decl fn" id="svc_rpcb_cleanup" title='svc_rpcb_cleanup' data-ref="svc_rpcb_cleanup" data-ref-filename="svc_rpcb_cleanup">svc_rpcb_cleanup</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col8 decl" id="578serv" title='serv' data-type='struct svc_serv *' data-ref="578serv" data-ref-filename="578serv">serv</dfn>, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *<dfn class="local col9 decl" id="579net" title='net' data-type='struct net *' data-ref="579net" data-ref-filename="579net">net</dfn>);</td></tr>
<tr><th id="468">468</th><td><em>int</em> <dfn class="decl fn" id="svc_bind" title='svc_bind' data-ref="svc_bind" data-ref-filename="svc_bind">svc_bind</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col0 decl" id="580serv" title='serv' data-type='struct svc_serv *' data-ref="580serv" data-ref-filename="580serv">serv</dfn>, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *<dfn class="local col1 decl" id="581net" title='net' data-type='struct net *' data-ref="581net" data-ref-filename="581net">net</dfn>);</td></tr>
<tr><th id="469">469</th><td><b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="decl fn" id="svc_create" title='svc_create' data-ref="svc_create" data-ref-filename="svc_create">svc_create</dfn>(<b>struct</b> <a class="type" href="#svc_program" title='svc_program' data-ref="svc_program" data-ref-filename="svc_program">svc_program</a> *, <em>unsigned</em> <em>int</em>,</td></tr>
<tr><th id="470">470</th><td>			    <em>const</em> <b>struct</b> <a class="type" href="#svc_serv_ops" title='svc_serv_ops' data-ref="svc_serv_ops" data-ref-filename="svc_serv_ops">svc_serv_ops</a> *);</td></tr>
<tr><th id="471">471</th><td><b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="decl fn" id="svc_rqst_alloc" title='svc_rqst_alloc' data-ref="svc_rqst_alloc" data-ref-filename="svc_rqst_alloc">svc_rqst_alloc</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col2 decl" id="582serv" title='serv' data-type='struct svc_serv *' data-ref="582serv" data-ref-filename="582serv">serv</dfn>,</td></tr>
<tr><th id="472">472</th><td>					<b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *<dfn class="local col3 decl" id="583pool" title='pool' data-type='struct svc_pool *' data-ref="583pool" data-ref-filename="583pool">pool</dfn>, <em>int</em> <dfn class="local col4 decl" id="584node" title='node' data-type='int' data-ref="584node" data-ref-filename="584node">node</dfn>);</td></tr>
<tr><th id="473">473</th><td><b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="decl fn" id="svc_prepare_thread" title='svc_prepare_thread' data-ref="svc_prepare_thread" data-ref-filename="svc_prepare_thread">svc_prepare_thread</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col5 decl" id="585serv" title='serv' data-type='struct svc_serv *' data-ref="585serv" data-ref-filename="585serv">serv</dfn>,</td></tr>
<tr><th id="474">474</th><td>					<b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *<dfn class="local col6 decl" id="586pool" title='pool' data-type='struct svc_pool *' data-ref="586pool" data-ref-filename="586pool">pool</dfn>, <em>int</em> <dfn class="local col7 decl" id="587node" title='node' data-type='int' data-ref="587node" data-ref-filename="587node">node</dfn>);</td></tr>
<tr><th id="475">475</th><td><em>void</em>		   <dfn class="decl fn" id="svc_rqst_free" title='svc_rqst_free' data-ref="svc_rqst_free" data-ref-filename="svc_rqst_free">svc_rqst_free</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="476">476</th><td><em>void</em>		   <dfn class="decl fn" id="svc_exit_thread" title='svc_exit_thread' data-ref="svc_exit_thread" data-ref-filename="svc_exit_thread">svc_exit_thread</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="477">477</th><td><em>unsigned</em> <em>int</em>	   <dfn class="decl fn" id="svc_pool_map_get" title='svc_pool_map_get' data-ref="svc_pool_map_get" data-ref-filename="svc_pool_map_get">svc_pool_map_get</dfn>(<em>void</em>);</td></tr>
<tr><th id="478">478</th><td><em>void</em>		   <dfn class="decl fn" id="svc_pool_map_put" title='svc_pool_map_put' data-ref="svc_pool_map_put" data-ref-filename="svc_pool_map_put">svc_pool_map_put</dfn>(<em>void</em>);</td></tr>
<tr><th id="479">479</th><td><b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *  <dfn class="decl fn" id="svc_create_pooled" title='svc_create_pooled' data-ref="svc_create_pooled" data-ref-filename="svc_create_pooled">svc_create_pooled</dfn>(<b>struct</b> <a class="type" href="#svc_program" title='svc_program' data-ref="svc_program" data-ref-filename="svc_program">svc_program</a> *, <em>unsigned</em> <em>int</em>,</td></tr>
<tr><th id="480">480</th><td>			<em>const</em> <b>struct</b> <a class="type" href="#svc_serv_ops" title='svc_serv_ops' data-ref="svc_serv_ops" data-ref-filename="svc_serv_ops">svc_serv_ops</a> *);</td></tr>
<tr><th id="481">481</th><td><em>int</em>		   <dfn class="decl fn" id="svc_set_num_threads" title='svc_set_num_threads' data-ref="svc_set_num_threads" data-ref-filename="svc_set_num_threads">svc_set_num_threads</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *, <em>int</em>);</td></tr>
<tr><th id="482">482</th><td><em>int</em>		   <dfn class="decl fn" id="svc_set_num_threads_sync" title='svc_set_num_threads_sync' data-ref="svc_set_num_threads_sync" data-ref-filename="svc_set_num_threads_sync">svc_set_num_threads_sync</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *, <em>int</em>);</td></tr>
<tr><th id="483">483</th><td><em>int</em>		   <dfn class="decl fn" id="svc_pool_stats_open" title='svc_pool_stats_open' data-ref="svc_pool_stats_open" data-ref-filename="svc_pool_stats_open">svc_pool_stats_open</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col8 decl" id="588serv" title='serv' data-type='struct svc_serv *' data-ref="588serv" data-ref-filename="588serv">serv</dfn>, <b>struct</b> <a class="type" href="../fs.h.html#file" title='file' data-ref="file" data-ref-filename="file">file</a> *<dfn class="local col9 decl" id="589file" title='file' data-type='struct file *' data-ref="589file" data-ref-filename="589file">file</dfn>);</td></tr>
<tr><th id="484">484</th><td><em>void</em>		   <dfn class="decl fn" id="svc_destroy" title='svc_destroy' data-ref="svc_destroy" data-ref-filename="svc_destroy">svc_destroy</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *);</td></tr>
<tr><th id="485">485</th><td><em>void</em>		   <dfn class="decl fn" id="svc_shutdown_net" title='svc_shutdown_net' data-ref="svc_shutdown_net" data-ref-filename="svc_shutdown_net">svc_shutdown_net</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *);</td></tr>
<tr><th id="486">486</th><td><em>int</em>		   <dfn class="decl fn" id="svc_process" title='svc_process' data-ref="svc_process" data-ref-filename="svc_process">svc_process</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="487">487</th><td><em>int</em>		   <dfn class="decl fn" id="bc_svc_process" title='bc_svc_process' data-ref="bc_svc_process" data-ref-filename="bc_svc_process">bc_svc_process</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="xprt.h.html#rpc_rqst" title='rpc_rqst' data-ref="rpc_rqst" data-ref-filename="rpc_rqst">rpc_rqst</a> *,</td></tr>
<tr><th id="488">488</th><td>			<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *);</td></tr>
<tr><th id="489">489</th><td><em>int</em>		   <dfn class="decl fn" id="svc_register" title='svc_register' data-ref="svc_register" data-ref-filename="svc_register">svc_register</dfn>(<em>const</em> <b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *, <b>struct</b> <a class="type" href="../../net/net_namespace.h.html#net" title='net' data-ref="net" data-ref-filename="net">net</a> *, <em>const</em> <em>int</em>,</td></tr>
<tr><th id="490">490</th><td>				<em>const</em> <em>unsigned</em> <em>short</em>, <em>const</em> <em>unsigned</em> <em>short</em>);</td></tr>
<tr><th id="491">491</th><td></td></tr>
<tr><th id="492">492</th><td><em>void</em>		   <dfn class="decl fn" id="svc_wake_up" title='svc_wake_up' data-ref="svc_wake_up" data-ref-filename="svc_wake_up">svc_wake_up</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *);</td></tr>
<tr><th id="493">493</th><td><em>void</em>		   <dfn class="decl fn" id="svc_reserve" title='svc_reserve' data-ref="svc_reserve" data-ref-filename="svc_reserve">svc_reserve</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col0 decl" id="590rqstp" title='rqstp' data-type='struct svc_rqst *' data-ref="590rqstp" data-ref-filename="590rqstp">rqstp</dfn>, <em>int</em> <dfn class="local col1 decl" id="591space" title='space' data-type='int' data-ref="591space" data-ref-filename="591space">space</dfn>);</td></tr>
<tr><th id="494">494</th><td><b>struct</b> <a class="type" href="#svc_pool" title='svc_pool' data-ref="svc_pool" data-ref-filename="svc_pool">svc_pool</a> *  <dfn class="decl fn" id="svc_pool_for_cpu" title='svc_pool_for_cpu' data-ref="svc_pool_for_cpu" data-ref-filename="svc_pool_for_cpu">svc_pool_for_cpu</dfn>(<b>struct</b> <a class="type" href="#svc_serv" title='svc_serv' data-ref="svc_serv" data-ref-filename="svc_serv">svc_serv</a> *<dfn class="local col2 decl" id="592serv" title='serv' data-type='struct svc_serv *' data-ref="592serv" data-ref-filename="592serv">serv</dfn>, <em>int</em> <dfn class="local col3 decl" id="593cpu" title='cpu' data-type='int' data-ref="593cpu" data-ref-filename="593cpu">cpu</dfn>);</td></tr>
<tr><th id="495">495</th><td><em>char</em> *		   <dfn class="decl fn" id="svc_print_addr" title='svc_print_addr' data-ref="svc_print_addr" data-ref-filename="svc_print_addr">svc_print_addr</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *, <em>char</em> *, <a class="typedef" href="../types.h.html#size_t" title='size_t' data-type='__kernel_size_t' data-ref="size_t" data-ref-filename="size_t">size_t</a>);</td></tr>
<tr><th id="496">496</th><td></td></tr>
<tr><th id="497">497</th><td><u>#define	<dfn class="macro" id="_M/RPC_MAX_ADDRBUFLEN" data-ref="_M/RPC_MAX_ADDRBUFLEN">RPC_MAX_ADDRBUFLEN</dfn>	(63U)</u></td></tr>
<tr><th id="498">498</th><td></td></tr>
<tr><th id="499">499</th><td><i>/*</i></td></tr>
<tr><th id="500">500</th><td><i> * When we want to reduce the size of the reserved space in the response</i></td></tr>
<tr><th id="501">501</th><td><i> * buffer, we need to take into account the size of any checksum data that</i></td></tr>
<tr><th id="502">502</th><td><i> * may be at the end of the packet. This is difficult to determine exactly</i></td></tr>
<tr><th id="503">503</th><td><i> * for all cases without actually generating the checksum, so we just use a</i></td></tr>
<tr><th id="504">504</th><td><i> * static value.</i></td></tr>
<tr><th id="505">505</th><td><i> */</i></td></tr>
<tr><th id="506">506</th><td><em>static</em> <a class="macro" href="../compiler-gcc.h.html#83" title="inline __attribute__((unused)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="svc_reserve_auth" title='svc_reserve_auth' data-ref="svc_reserve_auth" data-ref-filename="svc_reserve_auth">svc_reserve_auth</dfn>(<b>struct</b> <a class="type" href="#svc_rqst" title='svc_rqst' data-ref="svc_rqst" data-ref-filename="svc_rqst">svc_rqst</a> *<dfn class="local col4 decl" id="594rqstp" title='rqstp' data-type='struct svc_rqst *' data-ref="594rqstp" data-ref-filename="594rqstp">rqstp</dfn>, <em>int</em> <dfn class="local col5 decl" id="595space" title='space' data-type='int' data-ref="595space" data-ref-filename="595space">space</dfn>)</td></tr>
<tr><th id="507">507</th><td>{</td></tr>
<tr><th id="508">508</th><td>	<a class="ref fn" href="#svc_reserve" title='svc_reserve' data-ref="svc_reserve" data-ref-filename="svc_reserve">svc_reserve</a>(<a class="local col4 ref" href="#594rqstp" title='rqstp' data-ref="594rqstp" data-ref-filename="594rqstp">rqstp</a>, <a class="local col5 ref" href="#595space" title='space' data-ref="595space" data-ref-filename="595space">space</a> + <a class="local col4 ref" href="#594rqstp" title='rqstp' data-ref="594rqstp" data-ref-filename="594rqstp">rqstp</a>-&gt;<a class="ref field" href="#svc_rqst::rq_auth_slack" title='svc_rqst::rq_auth_slack' data-ref="svc_rqst::rq_auth_slack" data-ref-filename="svc_rqst..rq_auth_slack">rq_auth_slack</a>);</td></tr>
<tr><th id="509">509</th><td>}</td></tr>
<tr><th id="510">510</th><td></td></tr>
<tr><th id="511">511</th><td><u>#<span data-ppcond="11">endif</span> /* SUNRPC_SVC_H */</u></td></tr>
<tr><th id="512">512</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../fs/lockd/clnt4xdr.c.html'>linux/fs/lockd/clnt4xdr.c</a><br/>Generated on <em>2019-Oct-10</em> from project linux revision <em>4.15.10</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
