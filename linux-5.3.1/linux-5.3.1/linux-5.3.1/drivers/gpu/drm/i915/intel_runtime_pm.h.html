<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>intel_runtime_pm.h source code [linux-5.3.1/drivers/gpu/drm/i915/intel_runtime_pm.h] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="i915_drm_suspend_mode,intel_runtime_pm "/>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'linux-5.3.1/drivers/gpu/drm/i915/intel_runtime_pm.h'; var root_path = '../../../../..'; var data_path = '../../../../../../data'; var ecma_script_api_version = 2;</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>linux-5.3.1</a>/<a href='../../..'>drivers</a>/<a href='../..'>gpu</a>/<a href='..'>drm</a>/<a href='./'>i915</a>/<a href='intel_runtime_pm.h.html'>intel_runtime_pm.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/* SPDX-License-Identifier: MIT */</i></td></tr>
<tr><th id="2">2</th><td><i>/*</i></td></tr>
<tr><th id="3">3</th><td><i> * Copyright Â© 2019 Intel Corporation</i></td></tr>
<tr><th id="4">4</th><td><i> */</i></td></tr>
<tr><th id="5">5</th><td></td></tr>
<tr><th id="6">6</th><td><u>#<span data-ppcond="6">ifndef</span> <span class="macro" data-ref="_M/__INTEL_RUNTIME_PM_H__">__INTEL_RUNTIME_PM_H__</span></u></td></tr>
<tr><th id="7">7</th><td><u>#define <dfn class="macro" id="_M/__INTEL_RUNTIME_PM_H__" data-ref="_M/__INTEL_RUNTIME_PM_H__">__INTEL_RUNTIME_PM_H__</dfn></u></td></tr>
<tr><th id="8">8</th><td></td></tr>
<tr><th id="9">9</th><td><u>#include <a href="../../../../include/linux/types.h.html">&lt;linux/types.h&gt;</a></u></td></tr>
<tr><th id="10">10</th><td></td></tr>
<tr><th id="11">11</th><td><u>#include <a href="display/intel_display.h.html">"display/intel_display.h"</a></u></td></tr>
<tr><th id="12">12</th><td></td></tr>
<tr><th id="13">13</th><td><u>#include <a href="intel_wakeref.h.html">"intel_wakeref.h"</a></u></td></tr>
<tr><th id="14">14</th><td></td></tr>
<tr><th id="15">15</th><td><u>#include <a href="i915_utils.h.html">"i915_utils.h"</a></u></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device" data-ref-filename="device" id="device">device</a>;</td></tr>
<tr><th id="18">18</th><td><b>struct</b> <a class="type" href="i915_drv.h.html#drm_i915_private" title='drm_i915_private' data-ref="drm_i915_private" data-ref-filename="drm_i915_private" id="drm_i915_private">drm_i915_private</a>;</td></tr>
<tr><th id="19">19</th><td><b>struct</b> <a class="type" href="../../../../include/drm/drm_print.h.html#drm_printer" title='drm_printer' data-ref="drm_printer" data-ref-filename="drm_printer" id="drm_printer">drm_printer</a>;</td></tr>
<tr><th id="20">20</th><td></td></tr>
<tr><th id="21">21</th><td><b>enum</b> <dfn class="type def" id="i915_drm_suspend_mode" title='i915_drm_suspend_mode' data-ref="i915_drm_suspend_mode" data-ref-filename="i915_drm_suspend_mode">i915_drm_suspend_mode</dfn> {</td></tr>
<tr><th id="22">22</th><td>	<dfn class="enum" id="I915_DRM_SUSPEND_IDLE" title='I915_DRM_SUSPEND_IDLE' data-ref="I915_DRM_SUSPEND_IDLE" data-ref-filename="I915_DRM_SUSPEND_IDLE">I915_DRM_SUSPEND_IDLE</dfn>,</td></tr>
<tr><th id="23">23</th><td>	<dfn class="enum" id="I915_DRM_SUSPEND_MEM" title='I915_DRM_SUSPEND_MEM' data-ref="I915_DRM_SUSPEND_MEM" data-ref-filename="I915_DRM_SUSPEND_MEM">I915_DRM_SUSPEND_MEM</dfn>,</td></tr>
<tr><th id="24">24</th><td>	<dfn class="enum" id="I915_DRM_SUSPEND_HIBERNATE" title='I915_DRM_SUSPEND_HIBERNATE' data-ref="I915_DRM_SUSPEND_HIBERNATE" data-ref-filename="I915_DRM_SUSPEND_HIBERNATE">I915_DRM_SUSPEND_HIBERNATE</dfn>,</td></tr>
<tr><th id="25">25</th><td>};</td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><i>/*</i></td></tr>
<tr><th id="28">28</th><td><i> * This struct helps tracking the state needed for runtime PM, which puts the</i></td></tr>
<tr><th id="29">29</th><td><i> * device in PCI D3 state. Notice that when this happens, nothing on the</i></td></tr>
<tr><th id="30">30</th><td><i> * graphics device works, even register access, so we don't get interrupts nor</i></td></tr>
<tr><th id="31">31</th><td><i> * anything else.</i></td></tr>
<tr><th id="32">32</th><td><i> *</i></td></tr>
<tr><th id="33">33</th><td><i> * Every piece of our code that needs to actually touch the hardware needs to</i></td></tr>
<tr><th id="34">34</th><td><i> * either call intel_runtime_pm_get or call intel_display_power_get with the</i></td></tr>
<tr><th id="35">35</th><td><i> * appropriate power domain.</i></td></tr>
<tr><th id="36">36</th><td><i> *</i></td></tr>
<tr><th id="37">37</th><td><i> * Our driver uses the autosuspend delay feature, which means we'll only really</i></td></tr>
<tr><th id="38">38</th><td><i> * suspend if we stay with zero refcount for a certain amount of time. The</i></td></tr>
<tr><th id="39">39</th><td><i> * default value is currently very conservative (see intel_runtime_pm_enable), but</i></td></tr>
<tr><th id="40">40</th><td><i> * it can be changed with the standard runtime PM files from sysfs.</i></td></tr>
<tr><th id="41">41</th><td><i> *</i></td></tr>
<tr><th id="42">42</th><td><i> * The irqs_disabled variable becomes true exactly after we disable the IRQs and</i></td></tr>
<tr><th id="43">43</th><td><i> * goes back to false exactly before we reenable the IRQs. We use this variable</i></td></tr>
<tr><th id="44">44</th><td><i> * to check if someone is trying to enable/disable IRQs while they're supposed</i></td></tr>
<tr><th id="45">45</th><td><i> * to be disabled. This shouldn't happen and we'll print some error messages in</i></td></tr>
<tr><th id="46">46</th><td><i> * case it happens.</i></td></tr>
<tr><th id="47">47</th><td><i> *</i></td></tr>
<tr><th id="48">48</th><td><i> * For more, read the Documentation/power/runtime_pm.rst.</i></td></tr>
<tr><th id="49">49</th><td><i> */</i></td></tr>
<tr><th id="50">50</th><td><b>struct</b> <dfn class="type def" id="intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</dfn> {</td></tr>
<tr><th id="51">51</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#atomic_t" title='atomic_t' data-type='struct atomic_t' data-ref="atomic_t" data-ref-filename="atomic_t">atomic_t</a> <dfn class="decl field" id="intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</dfn>;</td></tr>
<tr><th id="52">52</th><td>	<b>struct</b> <a class="type" href="../../../../include/linux/device.h.html#device" title='device' data-ref="device" data-ref-filename="device">device</a> *<dfn class="decl field" id="intel_runtime_pm::kdev" title='intel_runtime_pm::kdev' data-ref="intel_runtime_pm::kdev" data-ref-filename="intel_runtime_pm..kdev">kdev</dfn>; <i>/* points to i915-&gt;drm.pdev-&gt;dev */</i></td></tr>
<tr><th id="53">53</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a> <dfn class="decl field" id="intel_runtime_pm::available" title='intel_runtime_pm::available' data-ref="intel_runtime_pm::available" data-ref-filename="intel_runtime_pm..available">available</dfn>;</td></tr>
<tr><th id="54">54</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a> <dfn class="decl field" id="intel_runtime_pm::suspended" title='intel_runtime_pm::suspended' data-ref="intel_runtime_pm::suspended" data-ref-filename="intel_runtime_pm..suspended">suspended</dfn>;</td></tr>
<tr><th id="55">55</th><td>	<a class="typedef" href="../../../../include/linux/types.h.html#bool" title='bool' data-type='_Bool' data-ref="bool" data-ref-filename="bool">bool</a> <dfn class="decl field" id="intel_runtime_pm::irqs_enabled" title='intel_runtime_pm::irqs_enabled' data-ref="intel_runtime_pm::irqs_enabled" data-ref-filename="intel_runtime_pm..irqs_enabled">irqs_enabled</dfn>;</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><u>#<span data-ppcond="57">if</span> <a class="macro" href="../../../../include/linux/kconfig.h.html#71" title="0" data-ref="_M/IS_ENABLED">IS_ENABLED</a>(CONFIG_DRM_I915_DEBUG_RUNTIME_PM)</u></td></tr>
<tr><th id="58">58</th><td>	<i>/*</i></td></tr>
<tr><th id="59">59</th><td><i>	 * To aide detection of wakeref leaks and general misuse, we</i></td></tr>
<tr><th id="60">60</th><td><i>	 * track all wakeref holders. With manual markup (i.e. returning</i></td></tr>
<tr><th id="61">61</th><td><i>	 * a cookie to each rpm_get caller which they then supply to their</i></td></tr>
<tr><th id="62">62</th><td><i>	 * paired rpm_put) we can remove corresponding pairs of and keep</i></td></tr>
<tr><th id="63">63</th><td><i>	 * the array trimmed to active wakerefs.</i></td></tr>
<tr><th id="64">64</th><td><i>	 */</i></td></tr>
<tr><th id="65">65</th><td>	<b>struct</b> intel_runtime_pm_debug {</td></tr>
<tr><th id="66">66</th><td>		spinlock_t lock;</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>		depot_stack_handle_t last_acquire;</td></tr>
<tr><th id="69">69</th><td>		depot_stack_handle_t last_release;</td></tr>
<tr><th id="70">70</th><td></td></tr>
<tr><th id="71">71</th><td>		depot_stack_handle_t *owners;</td></tr>
<tr><th id="72">72</th><td>		<em>unsigned</em> <em>long</em> count;</td></tr>
<tr><th id="73">73</th><td>	} debug;</td></tr>
<tr><th id="74">74</th><td><u>#<span data-ppcond="57">endif</span></u></td></tr>
<tr><th id="75">75</th><td>};</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td><u>#define <dfn class="macro" id="_M/BITS_PER_WAKEREF" data-ref="_M/BITS_PER_WAKEREF">BITS_PER_WAKEREF</dfn>	\</u></td></tr>
<tr><th id="78">78</th><td><u>	BITS_PER_TYPE(struct_member(struct <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a>, <a class="ref field" href="#intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</a>))</u></td></tr>
<tr><th id="79">79</th><td><u>#define <dfn class="macro" id="_M/INTEL_RPM_WAKELOCK_SHIFT" data-ref="_M/INTEL_RPM_WAKELOCK_SHIFT">INTEL_RPM_WAKELOCK_SHIFT</dfn>	(BITS_PER_WAKEREF / 2)</u></td></tr>
<tr><th id="80">80</th><td><u>#define <dfn class="macro" id="_M/INTEL_RPM_WAKELOCK_BIAS" data-ref="_M/INTEL_RPM_WAKELOCK_BIAS">INTEL_RPM_WAKELOCK_BIAS</dfn>		(1 &lt;&lt; INTEL_RPM_WAKELOCK_SHIFT)</u></td></tr>
<tr><th id="81">81</th><td><u>#define <dfn class="macro" id="_M/INTEL_RPM_RAW_WAKEREF_MASK" data-ref="_M/INTEL_RPM_RAW_WAKEREF_MASK">INTEL_RPM_RAW_WAKEREF_MASK</dfn>	(INTEL_RPM_WAKELOCK_BIAS - 1)</u></td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em></td></tr>
<tr><th id="84">84</th><td><dfn class="decl def fn" id="intel_rpm_raw_wakeref_count" title='intel_rpm_raw_wakeref_count' data-ref="intel_rpm_raw_wakeref_count" data-ref-filename="intel_rpm_raw_wakeref_count">intel_rpm_raw_wakeref_count</dfn>(<em>int</em> <dfn class="local col6 decl" id="1316wakeref_count" title='wakeref_count' data-type='int' data-ref="1316wakeref_count" data-ref-filename="1316wakeref_count">wakeref_count</dfn>)</td></tr>
<tr><th id="85">85</th><td>{</td></tr>
<tr><th id="86">86</th><td>	<b>return</b> <a class="local col6 ref" href="#1316wakeref_count" title='wakeref_count' data-ref="1316wakeref_count" data-ref-filename="1316wakeref_count">wakeref_count</a> &amp; <a class="macro" href="#81" title="((1 &lt;&lt; ((sizeof((((struct intel_runtime_pm *)0)-&gt;wakeref_count)) * 8) / 2)) - 1)" data-ref="_M/INTEL_RPM_RAW_WAKEREF_MASK">INTEL_RPM_RAW_WAKEREF_MASK</a>;</td></tr>
<tr><th id="87">87</th><td>}</td></tr>
<tr><th id="88">88</th><td></td></tr>
<tr><th id="89">89</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>int</em></td></tr>
<tr><th id="90">90</th><td><dfn class="decl def fn" id="intel_rpm_wakelock_count" title='intel_rpm_wakelock_count' data-ref="intel_rpm_wakelock_count" data-ref-filename="intel_rpm_wakelock_count">intel_rpm_wakelock_count</dfn>(<em>int</em> <dfn class="local col7 decl" id="1317wakeref_count" title='wakeref_count' data-type='int' data-ref="1317wakeref_count" data-ref-filename="1317wakeref_count">wakeref_count</dfn>)</td></tr>
<tr><th id="91">91</th><td>{</td></tr>
<tr><th id="92">92</th><td>	<b>return</b> <a class="local col7 ref" href="#1317wakeref_count" title='wakeref_count' data-ref="1317wakeref_count" data-ref-filename="1317wakeref_count">wakeref_count</a> &gt;&gt; <a class="macro" href="#79" title="((sizeof((((struct intel_runtime_pm *)0)-&gt;wakeref_count)) * 8) / 2)" data-ref="_M/INTEL_RPM_WAKELOCK_SHIFT">INTEL_RPM_WAKELOCK_SHIFT</a>;</td></tr>
<tr><th id="93">93</th><td>}</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="96">96</th><td><dfn class="decl def fn" id="assert_rpm_device_not_suspended" title='assert_rpm_device_not_suspended' data-ref="assert_rpm_device_not_suspended" data-ref-filename="assert_rpm_device_not_suspended">assert_rpm_device_not_suspended</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col8 decl" id="1318rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1318rpm" data-ref-filename="1318rpm">rpm</dfn>)</td></tr>
<tr><th id="97">97</th><td>{</td></tr>
<tr><th id="98">98</th><td>	<a class="macro" href="../../../../include/asm-generic/bug.h.html#160" title="({ static bool __attribute__((__section__(&quot;.data.once&quot;))) __warned; int __ret_warn_once = !!(rpm-&gt;suspended); if (__builtin_expect(!!(__ret_warn_once &amp;&amp; !__warned), 0)) { __warned = true; ({ int __ret_warn_on = !!(1); if (__builtin_expect(!!(__ret_warn_on), 0)) do { __warn_printk(&quot;Device suspended during HW access\n&quot;); do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/woboq/linux-5.3.1/drivers/gpu/drm/i915/intel_runtime_pm.h&quot;), &quot;i&quot; (99), &quot;i&quot; ((1 &lt;&lt; 0)|(((9) &lt;&lt; 8))), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); ({ asm volatile(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (125)); }); } while (0); } while (0); __builtin_expect(!!(__ret_warn_on), 0); }); } __builtin_expect(!!(__ret_warn_once), 0); })" data-ref="_M/WARN_ONCE">WARN_ONCE</a>(<a class="local col8 ref" href="#1318rpm" title='rpm' data-ref="1318rpm" data-ref-filename="1318rpm">rpm</a>-&gt;<a class="ref field" href="#intel_runtime_pm::suspended" title='intel_runtime_pm::suspended' data-ref="intel_runtime_pm::suspended" data-ref-filename="intel_runtime_pm..suspended">suspended</a>,</td></tr>
<tr><th id="99">99</th><td>		  <q>"Device suspended during HW access\n"</q>);</td></tr>
<tr><th id="100">100</th><td>}</td></tr>
<tr><th id="101">101</th><td></td></tr>
<tr><th id="102">102</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="103">103</th><td><dfn class="decl def fn" id="__assert_rpm_raw_wakeref_held" title='__assert_rpm_raw_wakeref_held' data-ref="__assert_rpm_raw_wakeref_held" data-ref-filename="__assert_rpm_raw_wakeref_held">__assert_rpm_raw_wakeref_held</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col9 decl" id="1319rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1319rpm" data-ref-filename="1319rpm">rpm</dfn>, <em>int</em> <dfn class="local col0 decl" id="1320wakeref_count" title='wakeref_count' data-type='int' data-ref="1320wakeref_count" data-ref-filename="1320wakeref_count">wakeref_count</dfn>)</td></tr>
<tr><th id="104">104</th><td>{</td></tr>
<tr><th id="105">105</th><td>	<a class="ref fn" href="#assert_rpm_device_not_suspended" title='assert_rpm_device_not_suspended' data-ref="assert_rpm_device_not_suspended" data-ref-filename="assert_rpm_device_not_suspended">assert_rpm_device_not_suspended</a>(<a class="local col9 ref" href="#1319rpm" title='rpm' data-ref="1319rpm" data-ref-filename="1319rpm">rpm</a>);</td></tr>
<tr><th id="106">106</th><td>	<a class="macro" href="../../../../include/asm-generic/bug.h.html#160" title="({ static bool __attribute__((__section__(&quot;.data.once&quot;))) __warned; int __ret_warn_once = !!(!intel_rpm_raw_wakeref_count(wakeref_count)); if (__builtin_expect(!!(__ret_warn_once &amp;&amp; !__warned), 0)) { __warned = true; ({ int __ret_warn_on = !!(1); if (__builtin_expect(!!(__ret_warn_on), 0)) do { __warn_printk(&quot;RPM raw-wakeref not held\n&quot;); do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/woboq/linux-5.3.1/drivers/gpu/drm/i915/intel_runtime_pm.h&quot;), &quot;i&quot; (107), &quot;i&quot; ((1 &lt;&lt; 0)|(((9) &lt;&lt; 8))), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); ({ asm volatile(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (127)); }); } while (0); } while (0); __builtin_expect(!!(__ret_warn_on), 0); }); } __builtin_expect(!!(__ret_warn_once), 0); })" data-ref="_M/WARN_ONCE">WARN_ONCE</a>(!<a class="ref fn" href="#intel_rpm_raw_wakeref_count" title='intel_rpm_raw_wakeref_count' data-ref="intel_rpm_raw_wakeref_count" data-ref-filename="intel_rpm_raw_wakeref_count">intel_rpm_raw_wakeref_count</a>(<a class="local col0 ref" href="#1320wakeref_count" title='wakeref_count' data-ref="1320wakeref_count" data-ref-filename="1320wakeref_count">wakeref_count</a>),</td></tr>
<tr><th id="107">107</th><td>		  <q>"RPM raw-wakeref not held\n"</q>);</td></tr>
<tr><th id="108">108</th><td>}</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="111">111</th><td><dfn class="decl def fn" id="__assert_rpm_wakelock_held" title='__assert_rpm_wakelock_held' data-ref="__assert_rpm_wakelock_held" data-ref-filename="__assert_rpm_wakelock_held">__assert_rpm_wakelock_held</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col1 decl" id="1321rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1321rpm" data-ref-filename="1321rpm">rpm</dfn>, <em>int</em> <dfn class="local col2 decl" id="1322wakeref_count" title='wakeref_count' data-type='int' data-ref="1322wakeref_count" data-ref-filename="1322wakeref_count">wakeref_count</dfn>)</td></tr>
<tr><th id="112">112</th><td>{</td></tr>
<tr><th id="113">113</th><td>	<a class="ref fn" href="#__assert_rpm_raw_wakeref_held" title='__assert_rpm_raw_wakeref_held' data-ref="__assert_rpm_raw_wakeref_held" data-ref-filename="__assert_rpm_raw_wakeref_held">__assert_rpm_raw_wakeref_held</a>(<a class="local col1 ref" href="#1321rpm" title='rpm' data-ref="1321rpm" data-ref-filename="1321rpm">rpm</a>, <a class="local col2 ref" href="#1322wakeref_count" title='wakeref_count' data-ref="1322wakeref_count" data-ref-filename="1322wakeref_count">wakeref_count</a>);</td></tr>
<tr><th id="114">114</th><td>	<a class="macro" href="../../../../include/asm-generic/bug.h.html#160" title="({ static bool __attribute__((__section__(&quot;.data.once&quot;))) __warned; int __ret_warn_once = !!(!intel_rpm_wakelock_count(wakeref_count)); if (__builtin_expect(!!(__ret_warn_once &amp;&amp; !__warned), 0)) { __warned = true; ({ int __ret_warn_on = !!(1); if (__builtin_expect(!!(__ret_warn_on), 0)) do { __warn_printk(&quot;RPM wakelock ref not held during HW access\n&quot;); do { do { asm volatile(&quot;1:\t&quot; &quot;.byte 0x0f, 0x0b&quot; &quot;\n&quot; &quot;.pushsection __bug_table,\&quot;aw\&quot;\n&quot; &quot;2:\t&quot; &quot;.long &quot; &quot;1b&quot; &quot; - 2b&quot; &quot;\t# bug_entry::bug_addr\n&quot; &quot;\t&quot; &quot;.long &quot; &quot;%c0&quot; &quot; - 2b&quot; &quot;\t# bug_entry::file\n&quot; &quot;\t.word %c1&quot; &quot;\t# bug_entry::line\n&quot; &quot;\t.word %c2&quot; &quot;\t# bug_entry::flags\n&quot; &quot;\t.org 2b+%c3\n&quot; &quot;.popsection&quot; : : &quot;i&quot; (&quot;/home/woboq/linux-5.3.1/drivers/gpu/drm/i915/intel_runtime_pm.h&quot;), &quot;i&quot; (115), &quot;i&quot; ((1 &lt;&lt; 0)|(((9) &lt;&lt; 8))), &quot;i&quot; (sizeof(struct bug_entry))); } while (0); ({ asm volatile(&quot;%c0:\n\t&quot; &quot;.pushsection .discard.reachable\n\t&quot; &quot;.long %c0b - .\n\t&quot; &quot;.popsection\n\t&quot; : : &quot;i&quot; (129)); }); } while (0); } while (0); __builtin_expect(!!(__ret_warn_on), 0); }); } __builtin_expect(!!(__ret_warn_once), 0); })" data-ref="_M/WARN_ONCE">WARN_ONCE</a>(!<a class="ref fn" href="#intel_rpm_wakelock_count" title='intel_rpm_wakelock_count' data-ref="intel_rpm_wakelock_count" data-ref-filename="intel_rpm_wakelock_count">intel_rpm_wakelock_count</a>(<a class="local col2 ref" href="#1322wakeref_count" title='wakeref_count' data-ref="1322wakeref_count" data-ref-filename="1322wakeref_count">wakeref_count</a>),</td></tr>
<tr><th id="115">115</th><td>		  <q>"RPM wakelock ref not held during HW access\n"</q>);</td></tr>
<tr><th id="116">116</th><td>}</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="119">119</th><td><dfn class="decl def fn" id="assert_rpm_raw_wakeref_held" title='assert_rpm_raw_wakeref_held' data-ref="assert_rpm_raw_wakeref_held" data-ref-filename="assert_rpm_raw_wakeref_held">assert_rpm_raw_wakeref_held</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col3 decl" id="1323rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1323rpm" data-ref-filename="1323rpm">rpm</dfn>)</td></tr>
<tr><th id="120">120</th><td>{</td></tr>
<tr><th id="121">121</th><td>	<a class="ref fn" href="#__assert_rpm_raw_wakeref_held" title='__assert_rpm_raw_wakeref_held' data-ref="__assert_rpm_raw_wakeref_held" data-ref-filename="__assert_rpm_raw_wakeref_held">__assert_rpm_raw_wakeref_held</a>(<a class="local col3 ref" href="#1323rpm" title='rpm' data-ref="1323rpm" data-ref-filename="1323rpm">rpm</a>, <a class="macro" href="../../../../include/asm-generic/atomic-instrumented.h.html#29" title="atomic_read" data-ref="_M/atomic_read">atomic_read</a>(&amp;<a class="local col3 ref" href="#1323rpm" title='rpm' data-ref="1323rpm" data-ref-filename="1323rpm">rpm</a>-&gt;<a class="ref field" href="#intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</a>));</td></tr>
<tr><th id="122">122</th><td>}</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="125">125</th><td><dfn class="decl def fn" id="assert_rpm_wakelock_held" title='assert_rpm_wakelock_held' data-ref="assert_rpm_wakelock_held" data-ref-filename="assert_rpm_wakelock_held">assert_rpm_wakelock_held</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col4 decl" id="1324rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1324rpm" data-ref-filename="1324rpm">rpm</dfn>)</td></tr>
<tr><th id="126">126</th><td>{</td></tr>
<tr><th id="127">127</th><td>	<a class="ref fn" href="#__assert_rpm_wakelock_held" title='__assert_rpm_wakelock_held' data-ref="__assert_rpm_wakelock_held" data-ref-filename="__assert_rpm_wakelock_held">__assert_rpm_wakelock_held</a>(<a class="local col4 ref" href="#1324rpm" title='rpm' data-ref="1324rpm" data-ref-filename="1324rpm">rpm</a>, <a class="macro" href="../../../../include/asm-generic/atomic-instrumented.h.html#29" title="atomic_read" data-ref="_M/atomic_read">atomic_read</a>(&amp;<a class="local col4 ref" href="#1324rpm" title='rpm' data-ref="1324rpm" data-ref-filename="1324rpm">rpm</a>-&gt;<a class="ref field" href="#intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</a>));</td></tr>
<tr><th id="128">128</th><td>}</td></tr>
<tr><th id="129">129</th><td></td></tr>
<tr><th id="130">130</th><td><i class="doc">/**</i></td></tr>
<tr><th id="131">131</th><td><i class="doc"> * disable_rpm_wakeref_asserts - disable the RPM assert checks</i></td></tr>
<tr><th id="132">132</th><td><i class="doc"> *<span class="command"> @rpm</span>: the intel_runtime_pm structure</i></td></tr>
<tr><th id="133">133</th><td><i class="doc"> *</i></td></tr>
<tr><th id="134">134</th><td><i class="doc"> * This function disable asserts that check if we hold an RPM wakelock</i></td></tr>
<tr><th id="135">135</th><td><i class="doc"> * reference, while keeping the device-not-suspended checks still enabled.</i></td></tr>
<tr><th id="136">136</th><td><i class="doc"> * It's meant to be used only in special circumstances where our rule about</i></td></tr>
<tr><th id="137">137</th><td><i class="doc"> * the wakelock refcount wrt. the device power state doesn't hold. According</i></td></tr>
<tr><th id="138">138</th><td><i class="doc"> * to this rule at any point where we access the HW or want to keep the HW in</i></td></tr>
<tr><th id="139">139</th><td><i class="doc"> * an active state we must hold an RPM wakelock reference acquired via one of</i></td></tr>
<tr><th id="140">140</th><td><i class="doc"> * the intel_runtime_pm_get() helpers. Currently there are a few special spots</i></td></tr>
<tr><th id="141">141</th><td><i class="doc"> * where this rule doesn't hold: the IRQ and suspend/resume handlers, the</i></td></tr>
<tr><th id="142">142</th><td><i class="doc"> * forcewake release timer, and the GPU RPS and hangcheck works. All other</i></td></tr>
<tr><th id="143">143</th><td><i class="doc"> * users should avoid using this function.</i></td></tr>
<tr><th id="144">144</th><td><i class="doc"> *</i></td></tr>
<tr><th id="145">145</th><td><i class="doc"> * Any calls to this function must have a symmetric call to</i></td></tr>
<tr><th id="146">146</th><td><i class="doc"> * enable_rpm_wakeref_asserts().</i></td></tr>
<tr><th id="147">147</th><td><i class="doc"> */</i></td></tr>
<tr><th id="148">148</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="149">149</th><td><dfn class="decl def fn" id="disable_rpm_wakeref_asserts" title='disable_rpm_wakeref_asserts' data-ref="disable_rpm_wakeref_asserts" data-ref-filename="disable_rpm_wakeref_asserts">disable_rpm_wakeref_asserts</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col5 decl" id="1325rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1325rpm" data-ref-filename="1325rpm">rpm</dfn>)</td></tr>
<tr><th id="150">150</th><td>{</td></tr>
<tr><th id="151">151</th><td>	<a class="macro" href="../../../../include/asm-generic/atomic-instrumented.h.html#65" title="atomic_add" data-ref="_M/atomic_add">atomic_add</a>(<a class="macro" href="#80" title="(1 &lt;&lt; ((sizeof((((struct intel_runtime_pm *)0)-&gt;wakeref_count)) * 8) / 2))" data-ref="_M/INTEL_RPM_WAKELOCK_BIAS">INTEL_RPM_WAKELOCK_BIAS</a> + <var>1</var>,</td></tr>
<tr><th id="152">152</th><td>		   &amp;<a class="local col5 ref" href="#1325rpm" title='rpm' data-ref="1325rpm" data-ref-filename="1325rpm">rpm</a>-&gt;<a class="ref field" href="#intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</a>);</td></tr>
<tr><th id="153">153</th><td>}</td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><i class="doc">/**</i></td></tr>
<tr><th id="156">156</th><td><i class="doc"> * enable_rpm_wakeref_asserts - re-enable the RPM assert checks</i></td></tr>
<tr><th id="157">157</th><td><i class="doc"> *<span class="command"> @rpm</span>: the intel_runtime_pm structure</i></td></tr>
<tr><th id="158">158</th><td><i class="doc"> *</i></td></tr>
<tr><th id="159">159</th><td><i class="doc"> * This function re-enables the RPM assert checks after disabling them with</i></td></tr>
<tr><th id="160">160</th><td><i class="doc"> * disable_rpm_wakeref_asserts. It's meant to be used only in special</i></td></tr>
<tr><th id="161">161</th><td><i class="doc"> * circumstances otherwise its use should be avoided.</i></td></tr>
<tr><th id="162">162</th><td><i class="doc"> *</i></td></tr>
<tr><th id="163">163</th><td><i class="doc"> * Any calls to this function must have a symmetric call to</i></td></tr>
<tr><th id="164">164</th><td><i class="doc"> * disable_rpm_wakeref_asserts().</i></td></tr>
<tr><th id="165">165</th><td><i class="doc"> */</i></td></tr>
<tr><th id="166">166</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="167">167</th><td><dfn class="decl def fn" id="enable_rpm_wakeref_asserts" title='enable_rpm_wakeref_asserts' data-ref="enable_rpm_wakeref_asserts" data-ref-filename="enable_rpm_wakeref_asserts">enable_rpm_wakeref_asserts</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col6 decl" id="1326rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1326rpm" data-ref-filename="1326rpm">rpm</dfn>)</td></tr>
<tr><th id="168">168</th><td>{</td></tr>
<tr><th id="169">169</th><td>	<a class="macro" href="../../../../include/asm-generic/atomic-instrumented.h.html#153" title="atomic_sub" data-ref="_M/atomic_sub">atomic_sub</a>(<a class="macro" href="#80" title="(1 &lt;&lt; ((sizeof((((struct intel_runtime_pm *)0)-&gt;wakeref_count)) * 8) / 2))" data-ref="_M/INTEL_RPM_WAKELOCK_BIAS">INTEL_RPM_WAKELOCK_BIAS</a> + <var>1</var>,</td></tr>
<tr><th id="170">170</th><td>		   &amp;<a class="local col6 ref" href="#1326rpm" title='rpm' data-ref="1326rpm" data-ref-filename="1326rpm">rpm</a>-&gt;<a class="ref field" href="#intel_runtime_pm::wakeref_count" title='intel_runtime_pm::wakeref_count' data-ref="intel_runtime_pm::wakeref_count" data-ref-filename="intel_runtime_pm..wakeref_count">wakeref_count</a>);</td></tr>
<tr><th id="171">171</th><td>}</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_init_early" title='intel_runtime_pm_init_early' data-ref="intel_runtime_pm_init_early" data-ref-filename="intel_runtime_pm_init_early">intel_runtime_pm_init_early</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col7 decl" id="1327rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1327rpm" data-ref-filename="1327rpm">rpm</dfn>);</td></tr>
<tr><th id="174">174</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_enable" title='intel_runtime_pm_enable' data-ref="intel_runtime_pm_enable" data-ref-filename="intel_runtime_pm_enable">intel_runtime_pm_enable</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col8 decl" id="1328rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1328rpm" data-ref-filename="1328rpm">rpm</dfn>);</td></tr>
<tr><th id="175">175</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_disable" title='intel_runtime_pm_disable' data-ref="intel_runtime_pm_disable" data-ref-filename="intel_runtime_pm_disable">intel_runtime_pm_disable</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col9 decl" id="1329rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1329rpm" data-ref-filename="1329rpm">rpm</dfn>);</td></tr>
<tr><th id="176">176</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_cleanup" title='intel_runtime_pm_cleanup' data-ref="intel_runtime_pm_cleanup" data-ref-filename="intel_runtime_pm_cleanup">intel_runtime_pm_cleanup</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col0 decl" id="1330rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1330rpm" data-ref-filename="1330rpm">rpm</dfn>);</td></tr>
<tr><th id="177">177</th><td></td></tr>
<tr><th id="178">178</th><td><a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="decl fn" id="intel_runtime_pm_get" title='intel_runtime_pm_get' data-ref="intel_runtime_pm_get" data-ref-filename="intel_runtime_pm_get">intel_runtime_pm_get</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col1 decl" id="1331rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1331rpm" data-ref-filename="1331rpm">rpm</dfn>);</td></tr>
<tr><th id="179">179</th><td><a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="decl fn" id="intel_runtime_pm_get_if_in_use" title='intel_runtime_pm_get_if_in_use' data-ref="intel_runtime_pm_get_if_in_use" data-ref-filename="intel_runtime_pm_get_if_in_use">intel_runtime_pm_get_if_in_use</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col2 decl" id="1332rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1332rpm" data-ref-filename="1332rpm">rpm</dfn>);</td></tr>
<tr><th id="180">180</th><td><a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="decl fn" id="intel_runtime_pm_get_noresume" title='intel_runtime_pm_get_noresume' data-ref="intel_runtime_pm_get_noresume" data-ref-filename="intel_runtime_pm_get_noresume">intel_runtime_pm_get_noresume</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col3 decl" id="1333rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1333rpm" data-ref-filename="1333rpm">rpm</dfn>);</td></tr>
<tr><th id="181">181</th><td><a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="decl fn" id="intel_runtime_pm_get_raw" title='intel_runtime_pm_get_raw' data-ref="intel_runtime_pm_get_raw" data-ref-filename="intel_runtime_pm_get_raw">intel_runtime_pm_get_raw</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col4 decl" id="1334rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1334rpm" data-ref-filename="1334rpm">rpm</dfn>);</td></tr>
<tr><th id="182">182</th><td></td></tr>
<tr><th id="183">183</th><td><u>#define <dfn class="macro" id="_M/with_intel_runtime_pm" data-ref="_M/with_intel_runtime_pm">with_intel_runtime_pm</dfn>(rpm, wf) \</u></td></tr>
<tr><th id="184">184</th><td><u>	for ((wf) = intel_runtime_pm_get(rpm); (wf); \</u></td></tr>
<tr><th id="185">185</th><td><u>	     intel_runtime_pm_put((rpm), (wf)), (wf) = 0)</u></td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td><u>#define <dfn class="macro" id="_M/with_intel_runtime_pm_if_in_use" data-ref="_M/with_intel_runtime_pm_if_in_use">with_intel_runtime_pm_if_in_use</dfn>(rpm, wf) \</u></td></tr>
<tr><th id="188">188</th><td><u>	for ((wf) = intel_runtime_pm_get_if_in_use(rpm); (wf); \</u></td></tr>
<tr><th id="189">189</th><td><u>	     intel_runtime_pm_put((rpm), (wf)), (wf) = 0)</u></td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_put_unchecked" title='intel_runtime_pm_put_unchecked' data-ref="intel_runtime_pm_put_unchecked" data-ref-filename="intel_runtime_pm_put_unchecked">intel_runtime_pm_put_unchecked</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col5 decl" id="1335rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1335rpm" data-ref-filename="1335rpm">rpm</dfn>);</td></tr>
<tr><th id="192">192</th><td><u>#<span data-ppcond="192">if</span> <a class="macro" href="../../../../include/linux/kconfig.h.html#71" title="0" data-ref="_M/IS_ENABLED">IS_ENABLED</a>(CONFIG_DRM_I915_DEBUG_RUNTIME_PM)</u></td></tr>
<tr><th id="193">193</th><td><em>void</em> intel_runtime_pm_put(<b>struct</b> intel_runtime_pm *rpm, intel_wakeref_t wref);</td></tr>
<tr><th id="194">194</th><td><u>#<span data-ppcond="192">else</span></u></td></tr>
<tr><th id="195">195</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em></td></tr>
<tr><th id="196">196</th><td><dfn class="decl def fn" id="intel_runtime_pm_put" title='intel_runtime_pm_put' data-ref="intel_runtime_pm_put" data-ref-filename="intel_runtime_pm_put">intel_runtime_pm_put</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col6 decl" id="1336rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1336rpm" data-ref-filename="1336rpm">rpm</dfn>, <a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="local col7 decl" id="1337wref" title='wref' data-type='intel_wakeref_t' data-ref="1337wref" data-ref-filename="1337wref">wref</dfn>)</td></tr>
<tr><th id="197">197</th><td>{</td></tr>
<tr><th id="198">198</th><td>	<a class="ref fn" href="#intel_runtime_pm_put_unchecked" title='intel_runtime_pm_put_unchecked' data-ref="intel_runtime_pm_put_unchecked" data-ref-filename="intel_runtime_pm_put_unchecked">intel_runtime_pm_put_unchecked</a>(<a class="local col6 ref" href="#1336rpm" title='rpm' data-ref="1336rpm" data-ref-filename="1336rpm">rpm</a>);</td></tr>
<tr><th id="199">199</th><td>}</td></tr>
<tr><th id="200">200</th><td><u>#<span data-ppcond="192">endif</span></u></td></tr>
<tr><th id="201">201</th><td><em>void</em> <dfn class="decl fn" id="intel_runtime_pm_put_raw" title='intel_runtime_pm_put_raw' data-ref="intel_runtime_pm_put_raw" data-ref-filename="intel_runtime_pm_put_raw">intel_runtime_pm_put_raw</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col8 decl" id="1338rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1338rpm" data-ref-filename="1338rpm">rpm</dfn>, <a class="typedef" href="intel_wakeref.h.html#intel_wakeref_t" title='intel_wakeref_t' data-type='depot_stack_handle_t' data-ref="intel_wakeref_t" data-ref-filename="intel_wakeref_t">intel_wakeref_t</a> <dfn class="local col9 decl" id="1339wref" title='wref' data-type='intel_wakeref_t' data-ref="1339wref" data-ref-filename="1339wref">wref</dfn>);</td></tr>
<tr><th id="202">202</th><td></td></tr>
<tr><th id="203">203</th><td><u>#<span data-ppcond="203">if</span> <a class="macro" href="../../../../include/linux/kconfig.h.html#71" title="0" data-ref="_M/IS_ENABLED">IS_ENABLED</a>(CONFIG_DRM_I915_DEBUG_RUNTIME_PM)</u></td></tr>
<tr><th id="204">204</th><td><em>void</em> print_intel_runtime_pm_wakeref(<b>struct</b> intel_runtime_pm *rpm,</td></tr>
<tr><th id="205">205</th><td>				    <b>struct</b> drm_printer *p);</td></tr>
<tr><th id="206">206</th><td><u>#<span data-ppcond="203">else</span></u></td></tr>
<tr><th id="207">207</th><td><em>static</em> <a class="macro" href="../../../../include/linux/compiler_types.h.html#149" title="inline __attribute__((__gnu_inline__)) __attribute__((__unused__)) __attribute__((no_instrument_function))" data-ref="_M/inline"><b>inline</b></a> <em>void</em> <dfn class="decl def fn" id="print_intel_runtime_pm_wakeref" title='print_intel_runtime_pm_wakeref' data-ref="print_intel_runtime_pm_wakeref" data-ref-filename="print_intel_runtime_pm_wakeref">print_intel_runtime_pm_wakeref</dfn>(<b>struct</b> <a class="type" href="#intel_runtime_pm" title='intel_runtime_pm' data-ref="intel_runtime_pm" data-ref-filename="intel_runtime_pm">intel_runtime_pm</a> *<dfn class="local col0 decl" id="1340rpm" title='rpm' data-type='struct intel_runtime_pm *' data-ref="1340rpm" data-ref-filename="1340rpm">rpm</dfn>,</td></tr>
<tr><th id="208">208</th><td>						  <b>struct</b> <a class="type" href="../../../../include/drm/drm_print.h.html#drm_printer" title='drm_printer' data-ref="drm_printer" data-ref-filename="drm_printer">drm_printer</a> *<dfn class="local col1 decl" id="1341p" title='p' data-type='struct drm_printer *' data-ref="1341p" data-ref-filename="1341p">p</dfn>)</td></tr>
<tr><th id="209">209</th><td>{</td></tr>
<tr><th id="210">210</th><td>}</td></tr>
<tr><th id="211">211</th><td><u>#<span data-ppcond="203">endif</span></u></td></tr>
<tr><th id="212">212</th><td></td></tr>
<tr><th id="213">213</th><td><u>#<span data-ppcond="6">endif</span> /* __INTEL_RUNTIME_PM_H__ */</u></td></tr>
<tr><th id="214">214</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='display/dvo_ch7017.c.html'>linux-5.3.1/drivers/gpu/drm/i915/display/dvo_ch7017.c</a><br/>Generated on <em>2020-Jun-10</em> from project linux-5.3.1 revision <em>5.3.1</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
