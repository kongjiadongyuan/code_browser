<dec f='linux-5.3.1/include/linux/spinlock.h' l='454' type='int _atomic_dec_and_lock(atomic_t * atomic, spinlock_t * lock)'/>
<doc f='linux-5.3.1/include/linux/spinlock.h' l='446'>/**
 * atomic_dec_and_lock - lock on reaching reference count zero
 * @atomic: the atomic counter
 * @lock: the spinlock in question
 *
 * Decrements @atomic by 1.  If the result is 0, returns true and locks
 * @lock.  Returns false for all other cases.
 */</doc>
<use f='linux-5.3.1/drivers/md/md.c' l='589' macro='1' u='c' c='mddev_put'/>
<use f='linux-5.3.1/fs/inode.c' l='1578' macro='1' u='c' c='iput'/>
<use f='linux-5.3.1/fs/nfs/nfs4state.c' l='616' macro='1' u='c' c='nfs4_put_state_owner'/>
<def f='linux-5.3.1/lib/dec_and_lock.c' l='21' ll='33' type='int _atomic_dec_and_lock(atomic_t * atomic, spinlock_t * lock)'/>
<dec f='linux-5.3.1/lib/dec_and_lock.c' l='35' type='int _atomic_dec_and_lock(atomic_t * , spinlock_t * )'/>
<use f='linux-5.3.1/lib/dec_and_lock.c' l='35' c='_atomic_dec_and_lock'/>
<use f='linux-5.3.1/lib/dec_and_lock.c' l='35' u='a'/>
<doc f='linux-5.3.1/lib/dec_and_lock.c' l='6'>/*
 * This is an implementation of the notion of &quot;decrement a
 * reference count, and return locked if it decremented to zero&quot;.
 *
 * NOTE NOTE NOTE! This is _not_ equivalent to
 *
 *	if (atomic_dec_and_test(&amp;atomic)) {
 *		spin_lock(&amp;lock);
 *		return 1;
 *	}
 *	return 0;
 *
 * because the spin-lock and the decrement must be
 * &quot;atomic&quot;.
 */</doc>
<use f='linux-5.3.1/net/sunrpc/auth_gss/auth_gss.c' l='302' macro='1' u='c' c='put_pipe_version'/>
