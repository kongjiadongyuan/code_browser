<def f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.h' l='2553' ll='2577'/>
<use f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.h' l='3027'/>
<use f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.c' l='7691' c='tg3_tx_set_bd'/>
<use f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.c' l='163' c='tg3_init_rings'/>
<use f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.c' l='163' c='tg3_mem_tx_release'/>
<use f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.c' l='163' c='tg3_mem_tx_acquire'/>
<size>16</size>
<doc f='linux-5.3.1/drivers/net/ethernet/broadcom/tg3.h' l='2517'>/* There are two ways to manage the TX descriptors on the tigon3.
 * Either the descriptors are in host DMA&apos;able memory, or they
 * exist only in the cards on-chip SRAM.  All 16 send bds are under
 * the same mode, they may not be configured individually.
 *
 * This driver always uses host memory TX descriptors.
 *
 * To use host memory TX descriptors:
 *	1) Set GRC_MODE_HOST_SENDBDS in GRC_MODE register.
 *	   Make sure GRC_MODE_4X_NIC_SEND_RINGS is clear.
 *	2) Allocate DMA&apos;able memory.
 *	3) In NIC_SRAM_SEND_RCB (of desired index) of on-chip SRAM:
 *	   a) Set TG3_BDINFO_HOST_ADDR to DMA address of memory
 *	      obtained in step 2
 *	   b) Set TG3_BDINFO_NIC_ADDR to NIC_SRAM_TX_BUFFER_DESC.
 *	   c) Set len field of TG3_BDINFO_MAXLEN_FLAGS to number
 *            of TX descriptors.  Leave flags field clear.
 *	4) Access TX descriptors via host memory.  The chip
 *	   will refetch into local SRAM as needed when producer
 *	   index mailboxes are updated.
 *
 * To use on-chip TX descriptors:
 *	1) Set GRC_MODE_4X_NIC_SEND_RINGS in GRC_MODE register.
 *	   Make sure GRC_MODE_HOST_SENDBDS is clear.
 *	2) In NIC_SRAM_SEND_RCB (of desired index) of on-chip SRAM:
 *	   a) Set TG3_BDINFO_HOST_ADDR to zero.
 *	   b) Set TG3_BDINFO_NIC_ADDR to NIC_SRAM_TX_BUFFER_DESC
 *	   c) TG3_BDINFO_MAXLEN_FLAGS is don&apos;t care.
 *	3) Access TX descriptors directly in on-chip SRAM
 *	   using normal {read,write}l().  (and not using
 *         pointer dereferencing of ioremap()&apos;d memory like
 *	   the broken Broadcom driver does)
 *
 * Note that BDINFO_FLAGS_DISABLED should be set in the flags field of
 * TG3_BDINFO_MAXLEN_FLAGS of all unused SEND_RCB indices.
 */</doc>
<mbr r='tg3_tx_buffer_desc::addr_hi' o='0' t='u32'/>
<mbr r='tg3_tx_buffer_desc::addr_lo' o='32' t='u32'/>
<mbr r='tg3_tx_buffer_desc::len_flags' o='64' t='u32'/>
<mbr r='tg3_tx_buffer_desc::vlan_tag' o='96' t='u32'/>
